<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-main/adv-char-operation">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">字符界面操作进阶 | Linux Learning</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://linux.cworld.top/en/docs/main/adv-char-operation"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="字符界面操作进阶 | Linux Learning"><meta data-rh="true" name="description" content="关于 Linux 字符界面相关操作的讲解。"><meta data-rh="true" property="og:description" content="关于 Linux 字符界面相关操作的讲解。"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://linux.cworld.top/en/docs/main/adv-char-operation"><link data-rh="true" rel="alternate" href="https://linux.cworld.top/docs/main/adv-char-operation" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://linux.cworld.top/en/docs/main/adv-char-operation" hreflang="en"><link data-rh="true" rel="alternate" href="https://linux.cworld.top/docs/main/adv-char-operation" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Linux Learning RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Linux Learning Atom Feed"><link rel="stylesheet" href="/en/assets/css/styles.cbb58a28.css">
<link rel="preload" href="/en/assets/js/runtime~main.72796055.js" as="script">
<link rel="preload" href="/en/assets/js/main.022bd24e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="CWorld Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/en/img/logo.svg" alt="CWorld Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">CWorld Project</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/">笔记</a></div><div class="navbar__items navbar__items--right"><a href="https://blog.cworld.top/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">博客</a><a href="https://github.com/cworld1/linux-learning" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/main/adv-char-operation" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li><li><a href="/en/docs/main/adv-char-operation" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/">笔记简述</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/课程说明">课程说明</a><button aria-label="Toggle the collapsible sidebar category &#x27;课程说明&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/category/主要章节">主要章节</a><button aria-label="Toggle the collapsible sidebar category &#x27;主要章节&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/linux-intro-and-install">Linux 介绍和安装</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/main/adv-char-operation">字符界面操作进阶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/disk-part-and-lvm">磁盘分区和 LVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/file-sys-manage">文件系统管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/account-and-authority-manage">账户管理和权限管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/network-config-and-tools">网络配置与网络工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/process-management">进程管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/sys-monitor-and-log">系统监视与系统日志</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/附加章节">附加章节</a><button aria-label="Toggle the collapsible sidebar category &#x27;附加章节&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/category/主要章节"><span itemprop="name">主要章节</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">字符界面操作进阶</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>字符界面操作进阶</h1><p>关于 Linux 字符界面相关操作的讲解。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="内容要点">内容要点<a class="hash-link" href="#内容要点" title="Direct link to heading">​</a></h2><ol><li>链接文件</li><li>信息显示和文本操作命令</li><li>文件查找</li><li>vi 文本编辑器</li><li>命令补全、命令别名、命令历史</li><li>重定向、管道、命令替换、命令聚合</li><li>掌握 Shell 变量的定义、作用域和使用</li><li>掌握 Shell 脚本的使用</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="链接文件">链接文件<a class="hash-link" href="#链接文件" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ln-命令详解">ln 命令详解<a class="hash-link" href="#ln-命令详解" title="Direct link to heading">​</a></h3><p>功能：创建链接文件。 格式：<code>ln [参数] &lt;被链接的文件&gt; &lt;链接文件名&gt;</code> 参数：</p><ul><li><code>-s</code> ：创建软链接（符号链接）。</li><li><code>-f</code> ：强行创建链接，不论其是否存在。</li><li><code>-i</code> ：覆盖原有文件之前先询问用户。</li></ul><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> somefile hardlinkfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -s somefile softlinkfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -s somedir softlinkfile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="文件链接概念">文件链接概念<a class="hash-link" href="#文件链接概念" title="Direct link to heading">​</a></h3><ul><li>文件都有文件名与数据，这在 Linux 上被分成两个部分：用户数据 (user data) 与元数据 (metadata)。用户数据，即文件数据块 (data block)，数据块是记录文件真实内容的地方。</li><li>元数据则是文件的附加属性，如文件大小、创建时间、所有者、文件所在的 inode（节点）、文件名等信息。 在 Linux 中，元数据中的 inode 号，才是文件的唯一标识，而非文件名。文件名仅是为了方便人们的记忆和使用。系统或程序通过 inode 号寻找正确的文件数据块。</li><li>多个 filename 可以对应同一个 inode。但一个 filename 不能有多个 inode。</li></ul><p><img loading="lazy" alt="image-20220913193948713" src="/en/assets/images/image-20220913193948713-db13b452691164817f7416fd6fc68723.png" width="744" height="279" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="硬链接和软链接的比较">硬链接和软链接的比较<a class="hash-link" href="#硬链接和软链接的比较" title="Direct link to heading">​</a></h3><ul><li><p>从硬链接的角度看：硬链接是多个文件名对应同一个 inode。如果将任何一个文件名删除，档案的 inode 与 block 都还存在，依然还可以通过另一个文件名来读取正确的数据。此外，不论用哪一个文件名来编辑，最终的结果都会写入相同的 inode 和 block 中，因此均能进行数据的修改。</p><p>如：A 是 B 的硬链接（A 和 B 都是文件名），则 A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号相同，即一个 inode 节点对应两个不同的文件名，两个文件名指向同一个文件，A 和 B 对文件系统来说是完全平等的。如果删除了其中一个，对另外一个没有影响。每增加一个文件名，inode 节点上的链接数增加一。每删除一个对应的文件名，inode 节点上的链接数减一，直到为 0，inode 节点和对应的数据块被回收。</p></li><li><p>从软链接的角度看：软链接就是建立一个独立的文件，而这个文件会让数据的读取指向它 Link 的那个文件的档名，由于只是作为指向的动作，所以当来源档案被删除之后，软连接的档案无法开启，因为找不到原始档名。</p><p>如：A 是 B 的软链接（A 和 B 都是文件名），A 当中的 inode 节点号与 B 当中的 inode 节点号不相同，分别指向两块不同的数据块，存储的内容是不同的。A 的数据块中存放的只是 B 的路径。A 和 B 之间是“主从”关系，如果 B 被删除了，A 仍然还存在（因为两个是不同的文件），但指向的是一个无效的链接。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="硬链接和软链接的不同">硬链接和软链接的不同<a class="hash-link" href="#硬链接和软链接的不同" title="Direct link to heading">​</a></h3><p>硬链接：</p><ul><li>链接文件和被链接文件必须位于同一个文件系统内</li><li>不能建立指向目录的硬链接</li></ul><p>软链接：</p><ul><li>链接文件和被链接文件可以位于不同文件系统</li><li>可以建立指向目录的软链接</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="文本文件操作命令">文本文件操作命令<a class="hash-link" href="#文本文件操作命令" title="Direct link to heading">​</a></h2><p>常用的文本文件提取和分析命令：</p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>cat, more</td><td>显示文本文件内容</td></tr><tr><td>head, tail</td><td>显示文本文件的前或后若干行（横向截取文本文件内容）</td></tr><tr><td>cut</td><td>纵向切割出文本指定的部分（纵向截取文本文件内容）</td></tr><tr><td>grep</td><td>在文本文件中查找指定的字符串（按关键字提取文本文件中匹配的行）</td></tr></tbody></table><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 滚屏显示文件 /etc/passwd 的内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 滚屏显示文件 /etc/passwd 的内容，并显示行号</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> -n /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 分屏显示文件 /etc/passwd 的内容（注意空格键、回车键和q的使用）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 从第10行分屏显示文件 /etc/passwd 的内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> +10 /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 分屏显示文件 /etc/passwd 的内容（注意空格键、回车键、PgDn键、PgUp键和q的使用）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">less</span><span class="token plain"> /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 显示文件 myalllist 前4行的内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">head</span><span class="token plain"> -4 myalllist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 显示文件 myalllist 后4行的内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> -4 myalllist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 显示文件 myalllist 从10行开始到文件尾的内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> +10 myalllist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 跟踪显示不断增长的文件结尾内容（通常用于显示日志文件）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> -f /var/log/messages</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="管道命令详解">管道命令详解<a class="hash-link" href="#管道命令详解" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="管道命令的背景">管道命令的背景<a class="hash-link" href="#管道命令的背景" title="Direct link to heading">​</a></h3><blockquote><p>UNIX 系统的一个基本思想：一连串的小命令能够解决大问题。</p></blockquote><p>理想情况下，一连串小命令里的每个小命令都能够很好地完成一项单一的工作。现在需要有一些东西能够将这些简单的命令连接起来，这样管道就应运而生。</p><p>许多 Linux 命令具有过滤特性，即一条命令通过标准输入端口接受一个文件中的数据，命令执行后产生的结果数据又通过标准输出端口送给后一条命令，作为该命令的输入数据。后一条命令也是通过标准输入端口而接受输入数据。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="管道命令的使用">管道命令的使用<a class="hash-link" href="#管道命令的使用" title="Direct link to heading">​</a></h3><p>管道（使用符号“|”表示）用来连接命令：<code>命令1 | 命令2</code></p><p>→ 这表示将命令 1 的 STDOUT 发送给命令 2 的 STDIN。但注意 STDERR 不能通过管道转发。</p><p>我们可以用来组合多种工具的功能：<code>命令1 | 命令2 | 命令3 | ……</code></p><p>→ 管道线中的每一条命令都作为一个单独的进程运行，每一条命令的输出作为下一条命令的输入。同时由于管道线中的命令总是从左到右顺序执行的，因此管道线是单向的。</p><blockquote><p>管道使用练习：</p><ol><li><p>从 /etc/passwd 文件中提取用户信息，向终端上输出用户的信息格式为<em>name:uid:gid</em></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">head</span><span class="token plain"> -5 /etc/passwd </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> -1 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cut</span><span class="token plain"> -d </span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token plain"> -f </span><span class="token number" style="color:#36acaa">1,3</span><span class="token plain">,4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>如何从/etc/passwd 当中查找指定的用户名（第一个字段），并只显示该用户的行号？</p></li></ol></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sort-命令详解">sort 命令详解<a class="hash-link" href="#sort-命令详解" title="Direct link to heading">​</a></h2><p>功能：以行为单位对文件进行排序</p><p>格式：<code>sort [选项] [&lt;文件&gt; …]</code></p><p>选项：</p><ul><li><code>-r</code> ：逆向排序</li><li><code>-f</code> ：忽略字母的大小写</li><li><code>-n</code> ：根据字符串的数值进行排序</li><li><code>-u</code> ：对相同的行只输出一行</li><li><code>-t c</code> ：使用给定的字符 c 做为列的间隔符</li><li><code>-b</code> ：忽略前导的空格</li><li><code>-i</code> ：只考虑可打印字符</li><li><code>-k N</code> ：以第 N 列进行排序（默认以空格或制表符作为列的间隔符）</li></ul><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -nk </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -nrk3 -t </span><span class="token builtin class-name">:</span><span class="token plain"> /etc/passwd </span><span class="token comment" style="color:#999988;font-style:italic"># 按 uid 和”:“分隔符显示信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -nrk3 -t </span><span class="token builtin class-name">:</span><span class="token plain"> /etc/passwd </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cut</span><span class="token plain"> -d </span><span class="token builtin class-name">:</span><span class="token plain"> -f </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">df</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -nrk </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 按文件系统磁盘使用空间统计（k 必须和数字直接在一起）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">du</span><span class="token plain"> --max-depth</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -nk </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 按目录显示占用空间大小</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>一般来说，选项/参数是没有顺序要求的，但如果是带第二参数或有先后顺序区别时，顺序要求就会变得很重要。</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="find-命令详解">find 命令详解<a class="hash-link" href="#find-命令详解" title="Direct link to heading">​</a></h2><p>功能：在文件系统中查找匹配的文件</p><p>格式：<code>find [&lt;起始目录&gt; ...] [&lt;选项表达式&gt;] [&lt;条件匹配表达式&gt;] [&lt;动作表达式&gt;]</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="说明">说明<a class="hash-link" href="#说明" title="Direct link to heading">​</a></h3><ul><li><code>&lt;起始目录&gt;</code>：对每个指定的 <code>&lt;起始目录&gt;</code> 递归搜索目录树（省略 <code>&lt;起始目录&gt;</code> 表示当前目录）</li><li><code>&lt;选项表达式&gt;</code>：控制 find 命令的行为</li><li><code>&lt;条件匹配表达式&gt;</code>：根据匹配条件查找文件</li><li><code>&lt;动作表达式&gt;</code>：指定对查找结果的操作，默认为显示在标准输出</li></ul><blockquote><p>其中不带任何参数的 find 命令将在屏幕上递归显示当前目录下的文件列表。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="基础选项表达式">基础选项表达式<a class="hash-link" href="#基础选项表达式" title="Direct link to heading">​</a></h3><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td>-maxdepth LEVELS</td><td>设置最大的查找深度</td></tr><tr><td>-mount/ -xdev</td><td>查找文件时不跨越文件系统</td></tr><tr><td>-L</td><td>如果遇到符号链接文件，就跟踪链接所指的文件</td></tr><tr><td>-depth/ -d</td><td>查找目录自身之前先处理目录中的文件（即深度优先）</td></tr><tr><td>--help</td><td>显示 find 命令帮助信息</td></tr><tr><td>--version</td><td>显示 find 的版本</td></tr></tbody></table><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 递归显示当前目录的文件列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / </span><span class="token comment" style="color:#999988;font-style:italic"># 递归显示 / 目录的文件列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / -maxdepth </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 递归显示 / 目录的文件列表（仅限于3层目录）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / -xdev </span><span class="token comment" style="color:#999988;font-style:italic"># 递归显示 / 目录的文件列表（仅限于 / 文件系统）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home /www /srv </span><span class="token comment" style="color:#999988;font-style:italic"># 递归显示 /home、/www、/srv 目录的文件列表</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="条件匹配表达式">条件匹配表达式<a class="hash-link" href="#条件匹配表达式" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="文件名相关">文件名相关<a class="hash-link" href="#文件名相关" title="Direct link to heading">​</a></h4><table><thead><tr><th>条件</th><th>说明</th></tr></thead><tbody><tr><td>-name PATTERN</td><td>匹配文件名</td></tr><tr><td>-iname PATTERN</td><td>匹配文件名（忽略大小写）</td></tr><tr><td>-lname PATTERN</td><td>匹配符号链接文件名</td></tr><tr><td>-ilname PATTERN</td><td>匹配符号链接文件名（忽略大小写）</td></tr><tr><td>-wholename PATTERN</td><td>匹配文件的完整路径（不把 ”/“ 和 ”.“ 作为特殊字符）</td></tr><tr><td>-iwholename PATTERN</td><td>匹配文件的完整路径（忽略大小写）</td></tr></tbody></table><blockquote><p>PATTERN 使用 Shell 的匹配模式，可以使用 Shell 的通配符（<!-- -->*<!-- -->、？<!-- -->[<!-- -->]），但要用 “” 或 ‘’ 括起来</p></blockquote><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -maxdepth </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> -name symphony</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name </span><span class="token string" style="color:#e3116c">&#x27;d*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name </span><span class="token string" style="color:#e3116c">&#x27;???&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name </span><span class="token string" style="color:#e3116c">&#x27;ch[0-2][0-9].txt*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -iname </span><span class="token string" style="color:#e3116c">&#x27;[a-z]*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> ~ -name </span><span class="token string" style="color:#e3116c">&quot;*.txt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -name </span><span class="token string" style="color:#e3116c">&quot;[A-Z]*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /etc -name </span><span class="token string" style="color:#e3116c">&quot;host*&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="时间属性相关">时间属性相关<a class="hash-link" href="#时间属性相关" title="Direct link to heading">​</a></h4><table><thead><tr><th>条件</th><th>说明</th></tr></thead><tbody><tr><td>-amin N</td><td>查找 N 分钟以前被访问过的所有文件</td></tr><tr><td>-atime N</td><td>查找 N 天以前被访问过的所有文件</td></tr><tr><td>-cmin N</td><td>查找 N 分钟以前文件状态被修改过的所有文件（如权限修改）</td></tr><tr><td>-ctime N</td><td>查找 N 天以前文件状态被修改过的所有文件（如权限修改）</td></tr><tr><td>-mmin N</td><td>查找 N 分钟以前文件内容被修改过的所有文件</td></tr><tr><td>-mtime N</td><td>查找 N 天以前文件内容被修改过的所有文件</td></tr><tr><td>-used N</td><td>查找被改动过之后，在 N 天内被存取过的所有文件</td></tr></tbody></table><blockquote><p>以上选项中的 N 可以有三种输入方式：N, +N, -N。</p><p>如：</p><ul><li><code>20</code> 表示等于 20</li><li><code>+20</code> 表示大于 20（21，22，23 等）</li><li><code>-20</code> 表示小于 20（19，18，17 等）</li></ul></blockquote><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 在 /home 下查找最近2天之内内容修改过的文件：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -mtime -2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在 /home 下查找最近2天之内被访问过的文件：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -atime -2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在 /home 下查找60分钟之前改动过的文件：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -mmin +60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在 /home 下查找最近5分钟之内修改过的文件：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -mmin -5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在 /home 下查找30分钟之前被访问过的文件：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -amin +30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在 /home 下查找最近在2日内被改动之后被访问过的文件：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -used -2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此外，我们还有：</p><table><thead><tr><th>条件</th><th>说明</th></tr></thead><tbody><tr><td>-newer FILE</td><td>查找所有比 FILE 的内容修改时间新的文件</td></tr><tr><td>-cnewer FILE</td><td>查找所有比 FILE 的状态修改时间新的文件（比如权限修改）</td></tr><tr><td>-anewer FILE</td><td>查找所有比 FILE 的访问时间新的文件</td></tr></tbody></table><p>其中 FILE 为要比对的样板文件或目录。</p><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 在/home下查找修改时间比 tmp.txt 新的文件或目录：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -newertmp.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在/home下查找访问时间比 tmp.txt 新的文件或目录：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -anewer tmp.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="用户和组相关">用户和组相关<a class="hash-link" href="#用户和组相关" title="Direct link to heading">​</a></h4><table><thead><tr><th>条件</th><th>说明</th></tr></thead><tbody><tr><td>-uidN</td><td>ID 为 N 的用户的所有文件</td></tr><tr><td>-gidN</td><td>ID 为 N 的组的所有文件</td></tr><tr><td>-user USERNAME</td><td>用户名为 USERNAME 的所有文件</td></tr><tr><td>-group GROUPNAME</td><td>组名为 GROUPNAME 的所有文件</td></tr><tr><td>-nouser</td><td>文件属于不在 /etc/passwd 文件中的用户</td></tr><tr><td>-nogroup</td><td>文件属于不在 /etc/group 文件中的组</td></tr></tbody></table><p>同样的，N 可以使用 N, +N, -N。</p><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 查找在系统中已作废用户（在 /etc/passwd 中无记录）的文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / -nouser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找在系统中已作废组（在 /etc/group 中无记录）的文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / -nogroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找属于 osmond 用户的文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / -user osmond</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找属于 students 组的文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / -group students</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找 UID 为 502 的所有文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / -uid </span><span class="token number" style="color:#36acaa">502</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找 UID 大于 500 的用户的所有文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / -uid +500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找 GID 小于 60 的所有文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / -gid -60</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="文件权限相关">文件权限相关<a class="hash-link" href="#文件权限相关" title="Direct link to heading">​</a></h4><table><thead><tr><th>条件</th><th>说明</th></tr></thead><tbody><tr><td>-perm MODE</td><td>精确匹配权限模式为 MODE 的文件</td></tr><tr><td>-perm -MODE</td><td>匹配权限模式至少为 MODE 的文件（用户、组和其他人这三种权限必须都匹配）</td></tr><tr><td>-perm /MODE 或 -perm +MODE</td><td>匹配权限模式至少为 MODE 的文件（用户、组和其他人这三种权限中有一种匹配即可）</td></tr></tbody></table><blockquote><p>MODE 与 chown 命令的书写方式一致，既可以使用字符模式也可以使用八进制的数值模式，<strong>通常使用八进制的数值模式</strong></p></blockquote><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 在 /home 目录下查找权限为 700 的所有文件或目录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -perm </span><span class="token number" style="color:#36acaa">700</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在/home目录下查找权限至少为 740 的所有文件或目录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -perm -740</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在 ~/bin 目录下查找权限为 111 的所有文件或目录（或者所属用户可执行，或者组可执行，或者其他人可执行）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> ~/bin -perm /111</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="类型和大小相关">类型和大小相关<a class="hash-link" href="#类型和大小相关" title="Direct link to heading">​</a></h4><table><thead><tr><th>条件</th><th>说明</th></tr></thead><tbody><tr><td>-type TYPE</td><td>查找类型为 TYPE 的文件，可用的类型：b-块设备文件;c-字符设备文件;d-目录文件;p-命名管道;f-普通文件;l-符号(软)链接;s-socket 文件</td></tr><tr><td>-links N</td><td>查找有 N 个(硬)链接的文件</td></tr><tr><td>-inum N</td><td>查找文件 inode 为 N 的文件</td></tr><tr><td>-samefile NAME</td><td>查找与 NAME 文件具有相同 inode 的文件</td></tr><tr><td>-size N<!-- -->[<!-- -->bcwkMG]</td><td>查找文件大小为 N 的文件，单位可以为：b-512 字节的块（省略单位的默认值）;c-字节;k-Kilobytes;M-Megabytes;G-Gigabytes</td></tr><tr><td>-empty</td><td>查找空文件（大小为 0）</td></tr></tbody></table><p>同样的，N 可以使用 N, +N, -N。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -type d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home -links +2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -size +10k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /tmp -size 1G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -size-10M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /var/log -empty</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="组合条件表达式">组合条件表达式<a class="hash-link" href="#组合条件表达式" title="Direct link to heading">​</a></h3><ul><li>可以使用逻辑运算符与、或、非组成的复合条件，并可以用”（）“改变默认的操作符优先级。</li><li>若以空格作为各个表达式的间隔符，则各个表示式之间是<strong>与</strong>的关系。</li></ul><table><thead><tr><th>表达式</th><th>说明</th></tr></thead><tbody><tr><td>(EXPR)</td><td>改变操作符优先次序，一些 UNIX 版的 find 命令要使用 <code>\( EXPR \)</code> 的形式</td></tr><tr><td>!EXPR</td><td>表示对表达式取反</td></tr><tr><td>EXPR1 EXPR2</td><td>与逻辑，若 EXPR1 为假，将不再评估 EXPR2</td></tr><tr><td>EXPR1 -a EXPR2</td><td>与 EXPR1 EXPR2 功能一致</td></tr><tr><td>EXPR1-o EXPR2</td><td>逻辑或，若 EXPR1 为真，将不再评估 EXPR2</td></tr><tr><td>EXPR1, EXPR2</td><td>若 EXPR1 为假，继续评估 EXPR2</td></tr></tbody></table><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /tmp -size +10M -a -atime +21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /home </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> -user jjheng -o -user osmond </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> -size +10M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /tmp </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> -user osmond</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /mnt -name </span><span class="token string" style="color:#e3116c">&#x27;*.txt&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> -fstype vfat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /tmp -name </span><span class="token string" style="color:#e3116c">&#x27;l*&#x27;</span><span class="token plain"> -type l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /var/log -name </span><span class="token string" style="color:#e3116c">&#x27;*.log&#x27;</span><span class="token plain"> -mtime +5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -newer FILE1 </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> -newer FILE2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="动作表达式">动作表达式<a class="hash-link" href="#动作表达式" title="Direct link to heading">​</a></h3><table><thead><tr><th>表达式</th><th>说明</th></tr></thead><tbody><tr><td>-print</td><td>在标准输出上列出查找结果（每行一个文件）</td></tr><tr><td>-ls</td><td>使用 ‘ls -dils’ 在标准输出上列出查找结果</td></tr><tr><td>-prune</td><td>忽略对某个目录的查找</td></tr><tr><td>-exec COMMAND {} ;</td><td>对符合查找条件的文件执行 Linux 命令</td></tr><tr><td>-ok COMMAND {} ;</td><td>对符合查找条件的文件执行 Linux 命令；与 -exec 不同的是，它会询问用户是否需要执行</td></tr></tbody></table><blockquote><ul><li><code>{}</code> 两个大括号之间不能有空格，表示查找到的对象</li><li><code>\;</code> 表示命令结束，反斜杠与前面的大括号之间必须要留空格</li></ul></blockquote><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 查找并删除当前目录及其子目录下所有扩展名为 .tmp 的文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -name </span><span class="token string" style="color:#e3116c">&#x27;*.tmp&#x27;</span><span class="token plain"> -exec </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在logs目录中查找7天之内未修改过的文件并在删除前询问</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> logs -type f -mtime +7 -ok </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 从当前目录下查找所有以.repo为后缀的文件，并为其改名（添加.bak后缀）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -name </span><span class="token string" style="color:#e3116c">&#x27;*.repo&#x27;</span><span class="token plain"> -type f -exec </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">.bak </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查询并删除一周以来从未访问过的以 .o 结尾，或名为 a.out 且不存在于 vfat 文件系统中的所有文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> / </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> -name a.out -o -name ‘*.o’ </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> -atime +7 </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> -fstype vfat -exec </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 排除文件：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找当前目录下（除了 book 目录）之外的所有 .sh 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -name book -prune -o -name </span><span class="token string" style="color:#e3116c">&#x27;*.sh&#x27;</span><span class="token plain"> -print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 显示当前目录下（除了 book/server 目录）之外的所有文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -path ./book/server -prune -o -print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找当前目录下（除了 book/server 目录）之外的所有 .sh 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -path ./book/server -prune -o -name </span><span class="token string" style="color:#e3116c">&#x27;*.sh&#x27;</span><span class="token plain"> -print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 显示当前目录下除 book/server 和 book/server-utf8 目录的所有文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -path </span><span class="token string" style="color:#e3116c">&#x27;./book/server*&#x27;</span><span class="token plain"> -prune -o -print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找当前目录下（除了 book/server 和 book/server-utf8 目录）的所有 .sh 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> -path </span><span class="token string" style="color:#e3116c">&#x27;./book/server*&#x27;</span><span class="token plain"> -prune -o -name </span><span class="token string" style="color:#e3116c">&#x27;*.sh&#x27;</span><span class="token plain"> -print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 查找当前目录下（除了 book/server 和 book/basic 目录）的所有 .sh 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">-path ./book/server -o -path ./book/basic</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> -prune -o -name </span><span class="token string" style="color:#e3116c">&#x27;*.sh&#x27;</span><span class="token plain"> -print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 注意 -prune -o 一般为固定用法，表示排除的列表不再执行后续操作</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 以下表达式等价：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">*.sh -exec </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> /tmp </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name </span><span class="token string" style="color:#e3116c">&#x27;*.sh&#x27;</span><span class="token plain"> -exec </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> /tmp </span><span class="token string" style="color:#e3116c">&#x27;;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name </span><span class="token string" style="color:#e3116c">&quot;*.sh&quot;</span><span class="token plain"> -exec </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> /tmp </span><span class="token string" style="color:#e3116c">&quot;;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">*.sh -exec </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> /tmp </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name </span><span class="token string" style="color:#e3116c">&#x27;*.sh&#x27;</span><span class="token plain"> -exec </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{}&#x27;</span><span class="token plain"> /tmp </span><span class="token string" style="color:#e3116c">&#x27;;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> -name “*.sh” -exec </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> “</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">” /tmp &quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">”</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vi-文本编辑器详解">vi 文本编辑器详解<a class="hash-link" href="#vi-文本编辑器详解" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a class="hash-link" href="#简介" title="Direct link to heading">​</a></h3><ul><li>vi 是 “Visual interface” 的简称，它可以执行输出、删除、查找、替换、块操作等众多文本操作，而且用户可以根据自己的需要对其进行定制，这是其他编辑程序所没有的。</li><li>vi 不是一个排版程序，它不像 M$ Word 或 WPS 那样可以对字体、格式、段落等其他属性进行编排，它只是一个文本编辑程序。</li><li>vi 是全屏幕文本编辑器，它没有菜单，只有命令。</li><li>vim 即 Vi Improved，vi 克隆版本之一。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="命令">命令<a class="hash-link" href="#命令" title="Direct link to heading">​</a></h3><table><thead><tr><th><strong>命令</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>vi</td><td>直接进入</td></tr><tr><td>vi filename</td><td>打开或新建文件 filename，并将光标置于第一行首</td></tr><tr><td>vi +n filename</td><td>打开文件 filename，并将光标置于第 n 行首</td></tr><tr><td>vi+ filename</td><td>打开文件 filename，并将光标置于最后一行首</td></tr><tr><td>vi +/pattern filename</td><td>打开文件 filename，并将光标置于第一个与 pattern 匹配的串处</td></tr><tr><td>vi -r filename</td><td>打开上次用 vi 编辑时发生系统崩溃，恢复 filename</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-种运行模式">3 种运行模式<a class="hash-link" href="#3-种运行模式" title="Direct link to heading">​</a></h3><ul><li>普通（normal）模式</li><li>插入（insert）模式</li><li>命令行模式（末行模式）</li></ul><p><img loading="lazy" alt="image-20220913212347673" src="/en/assets/images/image-20220913212347673-23a9dab54f2bad21bf3bc96e03913bc5.png" width="939" height="577" class="img_ev3q"></p><p>模式须知：</p><ul><li>Normal 模式下，用户按冒号 “:” 即可进入 Command 模式，此时 vim 会在显示窗口的最后一行 (屏幕的最后一行) 显示一个 “:” 作为 Command 模式的提示符，等待输入命令。</li><li>多数文件管理都是在此模式下执行的 (如保存文件等)</li><li>Command 模式中所有的命令都必须按 &lt;回车&gt; 后执行，命令执行完后，vim 自动回到 Normal 模式。</li><li>若在 Command 模式下输入命令过程中改变了主意，可按 Esc 键，或用退格键将输入的命令全部删除之后，再按一下退格键，即可使 vi 回到 Normal 模式下。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="常见内容操作">常见内容操作<a class="hash-link" href="#常见内容操作" title="Direct link to heading">​</a></h3><ul><li>复制单行（普通模式）：yy</li><li>剪切单行（普通模式）：dd 或 cc</li><li>选取内容（普通模式）：输入 v，高亮选取</li><li>复制指定开始和结束行号之间的内容（命令行模式）：21,27y，然后回车</li><li>剪切开始和结束行之间的文本：上述方法中的 y 改成 d</li><li>粘贴文本（普通模式）：在粘贴位置(上一行)按 p 键</li><li>查找字符串（普通模式）：/或?，输入查找内容，回车。普通模式下按 n 键跳到下一条查找结果，按 N 键上一条结果。</li><li>撤销上一次操作（普通模式）：u</li><li>恢复上一次操作：ctrl+u</li><li>替换当前行内所有指定字符串（命令行模式）：s/old/new/g，如果不加 g 只替换第一个 old</li><li>替换指定行内所有指定字符串：2,10 s/old/new/g</li><li>全文替换：% s/old/new/g</li><li>替换第 n 行到最后一行所有指定字符串：n,$ s/old/new/g</li><li>替换当前行到最后一行：.,$, s/old/new/g</li><li>存盘退出 Vi：ZZ</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="常见命令">常见命令<a class="hash-link" href="#常见命令" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:n1,n2 co n3 </span><span class="token comment" style="color:#999988;font-style:italic"># 块复制，复制到 n3 后面</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:n1,n2 m n3 </span><span class="token comment" style="color:#999988;font-style:italic"># 块移动，移动到 n3 后面</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:w </span><span class="token comment" style="color:#999988;font-style:italic"># 保存当前编辑文件，但并不退出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:w newfile </span><span class="token comment" style="color:#999988;font-style:italic"># 存存为名为 “newfile” 的文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:wq </span><span class="token comment" style="color:#999988;font-style:italic"># 存盘退出 Vi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:q</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 用于不存盘退出 Vi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:q </span><span class="token comment" style="color:#999988;font-style:italic"># 直接退出 Vi（不做修改）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>设置 vi 环境：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:set number </span><span class="token comment" style="color:#999988;font-style:italic"># 在编辑文件时显示行号</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:set nonumber </span><span class="token comment" style="color:#999988;font-style:italic"># 不显示行号</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:set autoindent </span><span class="token comment" style="color:#999988;font-style:italic"># 缩进,常用于程序的编写</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:set noautoindent </span><span class="token comment" style="color:#999988;font-style:italic"># 取消缩进</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:set </span><span class="token assign-left variable" style="color:#36acaa">tabstop</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">value </span><span class="token comment" style="color:#999988;font-style:italic"># 设置显示制表符的空格字符个数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:set </span><span class="token comment" style="color:#999988;font-style:italic"># 显示设置的所有选项</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:set all </span><span class="token comment" style="color:#999988;font-style:italic"># 显示所有可以设置的选项</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="文本文件分析命令">文本文件分析命令<a class="hash-link" href="#文本文件分析命令" title="Direct link to heading">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wc</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 统计文本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 在文本文件中查找指定的字符串</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 文本流编辑器</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-命令">wc 命令<a class="hash-link" href="#wc-命令" title="Direct link to heading">​</a></h3><p>功能：统计文本文件的行数、字数、字符数 格式：<code>wc [选项] [&lt;文件&gt; …]</code> 如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wc</span><span class="token plain"> -l </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 统计行数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wc</span><span class="token plain"> -w </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 统计字数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wc</span><span class="token plain"> -c </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 统计字符数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wc</span><span class="token plain"> -L </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 统计最长一行的长度</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="grep-命令">grep 命令<a class="hash-link" href="#grep-命令" title="Direct link to heading">​</a></h3><p>grep 是一个强大的文本搜索工具。</p><p>命令格式：<code>grep [options] PATTERN [FILE...]</code></p><p>说明：</p><ul><li><code>PATTERN</code>：查找条件，可以是普通字符串，也可以是正则表达式（RE，通常用单引号将 RE 括起来）。</li><li><code>FILE</code>：是要查找的文件，可以是用空格间隔的多个文件，也可是使用 Shell 的通配符，定义在多个文件中进行查找，省略时表示在标准输入中查找。</li></ul><blockquote><p>grep 命令不会对输入文件进行任何修改或影响，可以使用输出重定向将结果存为文件。</p></blockquote><p>命令选项：</p><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td>-c</td><td>只显示匹配行的次数</td></tr><tr><td>-i</td><td>搜索时不区分大小写</td></tr><tr><td>-n</td><td>输出匹配行的行号</td></tr><tr><td>-v</td><td>输出不匹配的行（反向选择）</td></tr><tr><td>-r</td><td>对目录（子目录）的所有文件递归地进行</td></tr><tr><td>-l</td><td>列出匹配 PATTERN 的文件名</td></tr><tr><td>--color=auto</td><td>对匹配内容高亮显示</td></tr><tr><td>-A NUM</td><td>同时输出匹配行的后 NUM 行</td></tr><tr><td>-B NUM</td><td>同时输出匹配行的前 NUM 行</td></tr><tr><td>-C NUM</td><td>同时输出匹配行的前、后各 NUM 行</td></tr></tbody></table><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 在文件 myfile 中查找包含字符串 mystr的行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> mystr myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 显示 myfile 中第一个字符为字母的所有行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;^[a-zA-Z]&#x27;</span><span class="token plain">  myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 在文件 myfile 中查找首字符不是 # 的行（即过滤掉注释行）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> -v </span><span class="token string" style="color:#e3116c">&#x27;^#&#x27;</span><span class="token plain"> myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 过滤掉/etc/samba/smb.conf的注释行和空行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">egrep</span><span class="token plain"> -v ‘^</span><span class="token comment" style="color:#999988;font-style:italic">#|^$|^;’ /etc/samba/smb.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="正则表达式">正则表达式<a class="hash-link" href="#正则表达式" title="Direct link to heading">​</a></h2><p>正则表达式是使用某种模式（pattern）去匹配（matching）一类字符串的一个公式。</p><p>通常使用正则表达式进行查找、替换等操作。在适当的情况下使用正则表达式可以极大地提高工作效率。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="支持正则表达式的文本处理工具">支持正则表达式的文本处理工具<a class="hash-link" href="#支持正则表达式的文本处理工具" title="Direct link to heading">​</a></h3><p>基本的正则表达式 Basic regular expression (BRE)：</p><ul><li>qgrep 按模式匹配文本</li><li>qsed 一个流编辑器</li><li>qvim 一个屏幕编辑器</li><li>qemacs 一个屏幕编辑器</li></ul><p>扩展的正则表达式 Extended regular expression (ERE)：</p><ul><li>qegrep 按模式匹配文本</li><li>qawk 进行简单的文本处理</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="正则表达式的组成">正则表达式的组成<a class="hash-link" href="#正则表达式的组成" title="Direct link to heading">​</a></h3><p>正则表达式由一些普通字符和一些元字符（metacharacters）组成。</p><p>普通字符包括大小写的字母、数字（即所有非元字符）；元字符则具有特殊的含义。</p><p>正则表达式的元字符：</p><table><thead><tr><th>元字符</th><th>含义</th><th>类型</th><th>举例</th><th>说明</th></tr></thead><tbody><tr><td>^</td><td>匹配首字符</td><td>BRE</td><td>^x</td><td>以字符 x 开始的字符串</td></tr><tr><td>$</td><td>匹配尾字符</td><td>BRE</td><td>x$</td><td>以 x 字符结尾的字符串</td></tr><tr><td>.</td><td>匹配任意一个字符</td><td>BRE</td><td>l..e</td><td>love, life, live …</td></tr><tr><td>?</td><td>匹配任意一个可选字符</td><td>ERE</td><td>xy?</td><td>x, xy</td></tr><tr><td>*</td><td>匹配零次或多次重复</td><td>BRE</td><td>xy<!-- -->*</td><td>x, xy, xyy, xyyy …</td></tr><tr><td>+</td><td>匹配一次或多次重复</td><td>ERE</td><td>xy+</td><td>xy, xyy, xyyy …</td></tr><tr><td>[<!-- -->…]</td><td>匹配任意一个字符</td><td>BRE</td><td>[<!-- -->xyz]</td><td>x,y, z</td></tr><tr><td>()</td><td>对正则表达式分组</td><td>ERE</td><td>(xy)+</td><td>xy, xyxy, xyxyxy, …</td></tr><tr><td>{n}</td><td>匹配 n 次</td><td>BRE</td><td>go{2}gle</td><td>google</td></tr><tr><td>{n,}</td><td>匹配最少 n 次</td><td>BRE</td><td>go{2,}gle</td><td>google, gooogle, goooogle …</td></tr><tr><td>{n,m}</td><td>匹配 n 到 m 次</td><td>BRE</td><td>go{2,4}gle</td><td>google, gooogle, goooogle</td></tr><tr><td>{n}</td><td>匹配 n 次</td><td>ERE</td><td>go{2}gle</td><td>google</td></tr><tr><td>{n,}</td><td>匹配最少 n 次</td><td>ERE</td><td>go{2,}gle</td><td>google, gooogle, goooogle …</td></tr><tr><td>{n,m}</td><td>匹配 n 到 m 次</td><td>ERE</td><td>go{2,4}gle</td><td>google, gooogle, goooogle</td></tr><tr><td>|</td><td>以或逻辑连接多个匹配</td><td>ERE</td><td>good<!-- -->|<!-- -->bon</td><td>匹配 good 或 bon</td></tr><tr><td>\</td><td>转义字符</td><td>BRE</td><td>\<!-- -->*</td><td>*</td></tr><tr><td>^</td><td>非（仅用于启始字符）</td><td>BRE</td><td>[<!-- -->^xyz]</td><td>匹配 xyz 之外的任意一个字符</td></tr><tr><td>-</td><td>用于指明字符范围 （不能是首字符和尾字符）</td><td>BRE</td><td>[<!-- -->a-zA-Z]</td><td>匹配任意一个字母</td></tr><tr><td>\</td><td>转义字符</td><td>BRE</td><td>[<!-- -->\<!-- -->.]</td><td>.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sed-命令详解">sed 命令详解<a class="hash-link" href="#sed-命令详解" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sed-简介">sed 简介<a class="hash-link" href="#sed-简介" title="Direct link to heading">​</a></h3><p>sed 是一个流编辑器（stream editor）。sed 是一个非交互式的行编辑器，它在命令行中输入编辑命令、指定被处理的输入文件，然后在屏幕上查看输出。输入文件可以是指定的文件名，也可以来自一个管道的 输出。</p><p>与 vi 不同的是 sed 能够过滤来自管道的输入。在 sed 编辑器运行的时候不必人工干涉，所以 sed 常常被称作批编辑器。</p><p>sed 默认不改变输入文件的内容，且总是将处理结果输出到标准输出，可以使用输出重定向将 sed 的输出保存到文件中。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sed-的工作方式">sed 的工作方式<a class="hash-link" href="#sed-的工作方式" title="Direct link to heading">​</a></h3><p>sed 以按顺序逐行的方式工作，过程为：</p><ul><li>从输入读取一行数据存入临时缓冲区，此缓冲区称为模式空间（pattern space）。</li><li>按指定的 sed 编辑命令处理缓冲区中的内容。</li><li>把模式空间的内容送往屏幕并将这行内容从模式空间中删除。</li><li>读取下面一行。重复上面的过程直到全部处理结束。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sed-命令">sed 命令<a class="hash-link" href="#sed-命令" title="Direct link to heading">​</a></h3><p>格式：<code>sed [选项] [-e] cmd1 [[-e cmd2] ... [-e cmdn]] [input-file]...</code></p><p>说明：</p><ul><li>在命令行上执行 sed 编辑命令。可以指定多个编辑命令，每个编辑命令前都要使用 -e 参数，sed 将对这些编辑命令依次进行处理。若只有一个编辑命令时，-e 可以省略。</li><li>每个 sed 的编辑命令 cmdX 均应使用单引号括起来。</li><li>input-file：sed 处理的文件列表，若省略，sed 将从标准输入中读取输入，也可以从输入重定向或管道获得输入。</li><li>所有用于查询或替换的字符串都要使用 <code>/…/</code> 引起来</li></ul><p>选项：</p><ul><li><code>-r</code>：使用扩展正则表达式进行模式匹配。</li><li><code>-i</code>：直接对输入文件进行 sed 的命令操作，而不是由屏幕输出。</li><li><code>-n</code>：使用安静（silent）模式。在一般 sed 的用法中，所有来自 STDIN 的资料一般都会被列出到屏幕上。但如果加上 -n 参数后，则只有经过 sed 特殊处理的那一行(或者动作)才会被列出来。如果使用删除(d)的命令，不能使用 -n，否则将会不显示任何内容。</li><li><code>-e</code>：直接在指令列模式上进行 sed 的动作编辑。</li><li><code>-f</code>：直接将 sed 的动作写在一个档案内，<code>-f filename</code> 则可以执行 filename 内的 sed 动作。</li></ul><p>命令：</p><ul><li><p><code>a</code>：新增，a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)。</p></li><li><p><code>i</code>：插入，i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)。</p></li><li><p><code>c</code>：取代，c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行。</p></li><li><p><code>d</code>：删除，因为是删除，所以 d 后面通常不接任何内容；</p></li><li><p><code>p</code>：列印，将某个选择的资料列出。</p></li><li><p><code>/字符串/p</code>：查询包含字符串的所有行。</p></li><li><p><code>s</code>：取代，可以直接进行取代的工作。通常这个 s 的动作可以搭配 g 使用。</p></li><li><p><code>g</code>: 行内全面替换。</p><blockquote><p>如：<code>sed ‘1,20s/old/new/g’ abc</code></p><ul><li>如果不加 g，那么每行第一次出现的 old 用字符串 bew 替换；</li><li>加上 g，使得 sed 对所有符合的字符串都被替换。</li></ul></blockquote></li></ul><p>如：</p><p>删除某行</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1d&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 删除第一行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;$d&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 删除最后一行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1,2d&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 删除第一行到第二行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2,$d&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 删除第二行到最后一行</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>显示某行</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&#x27;1p&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 显示第一行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&#x27;$p&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 显示最后一行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&#x27;1,2p&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 显示第一行到第二行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&#x27;2,$p&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 显示第二行到最后一行</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用模式进行查询</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&#x27;/ruby/p&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 查询包括关键字ruby所在所有行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&#x27;/\$/p&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic"># 查询包括关键字$所在所有行，使用反斜线\屏蔽特殊含义</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>增加一行或多行字符串</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> ab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Hello!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ruby is me,welcome to my blog.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1a drink tea&#x27;</span><span class="token plain"> ab  </span><span class="token comment" style="color:#999988;font-style:italic">#第一行后增加字符串&quot;drink tea&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Hello!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># drink tea</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ruby is me,welcome to my blog.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1,3a drink tea&#x27;</span><span class="token plain"> ab </span><span class="token comment" style="color:#999988;font-style:italic">#第一行到第三行后增加字符串&quot;drink tea&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Hello!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># drink tea</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ruby is me,welcome to my blog.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># drink tea</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># drink tea</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1a drink tea\nor coffee&#x27;</span><span class="token plain"> ab   </span><span class="token comment" style="color:#999988;font-style:italic">#第一行后增加多行，使用换行符\n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Hello!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># drink tea</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># or coffee</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ruby is me,welcome to my blog.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 代替一行或多行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1c Hi&#x27;</span><span class="token plain"> ab</span><span class="token comment" style="color:#999988;font-style:italic"># # #  #第一行代替为Hi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Hi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ruby is me,welcome to my blog.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1,2c Hi&#x27;</span><span class="token plain"> ab</span><span class="token comment" style="color:#999988;font-style:italic"># #    #第一行到第二行代替为Hi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Hi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>插入</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 将 myfile 文件中每行第一次出现的foo用字符串bar替换，然后将该文件内容输出到标准输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">&#x27;s/foo/bar/&#x27;</span><span class="token plain"> myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># g 使得 sed 对文件中所有符合的字符串都被替换</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">&#x27;s/foo/bar/g&#x27;</span><span class="token plain"> myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 选项 i 使得 sed 修改文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/foo/bar/g&#x27;</span><span class="token plain"> myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 批量操作当前目录下以 m 开头的文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/foo/bar/g&#x27;</span><span class="token plain"> ./m*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其他示例：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 将myfile中的所有Windows替换成Linux</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -i </span><span class="token string" style="color:#e3116c">&#x27;s/Windows/Linux/g’ myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># 功能同上，但不对输入文件本身进行替换，仅在屏幕输出结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">sed &#x27;</span><span class="token plain">s/Windows/Linux/g</span><span class="token string" style="color:#e3116c">&#x27; myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># 将myfile中所有连续出现的c都压缩成单个的c，仅在屏幕输出结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">sed &#x27;</span><span class="token plain">s/cc</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">*/c/g</span><span class="token string" style="color:#e3116c">&#x27; myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># 删除myfile中每一行前导的连续“空白字符”（空格，制表符），仅在屏幕输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">sed &#x27;</span><span class="token plain">s/^</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">*//</span><span class="token string" style="color:#e3116c">&#x27; myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># 删除myfile中每行结尾的所有空格，仅在屏幕输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">sed &#x27;</span><span class="token plain">s/ </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">*$//</span><span class="token string" style="color:#e3116c">&#x27; myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># 删除所有空白行，仅在屏幕输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">sed &#x27;</span><span class="token plain">s/^$//</span><span class="token string" style="color:#e3116c">&#x27; myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># 在每一行开头加上一个尖括号和空格（引用信息），仅在屏幕输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">sed &#x27;</span><span class="token plain">s/^/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /&#x27; myfile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tar-命令详解">tar 命令详解<a class="hash-link" href="#tar-命令详解" title="Direct link to heading">​</a></h2><p>基本功能：打包和解包</p><p>格式：<code>tar [选项] 文件或者目录</code></p><p>常用选项：</p><ul><li><code>-c</code>：创建新的打包文件。</li><li><code>-t</code>：列出打包文件的内容，查看已经打包了哪些文件。</li><li><code>-x</code>：从打包文件中释放文件。</li><li><code>-f</code>：指定打包文件名。</li><li><code>-v</code>：详细列出 tar 处理的文件信息。</li><li><code>-z</code>：用 gzip 来压缩/解压缩打包文件。</li><li><code>-j</code>：用 bzip2 来压缩/解压缩打包文件。</li></ul><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -cvf myball.tar somedirname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -tf myball.tar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -xvf myball.tar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -zcvf myball.tar.gz somedirname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -ztf myball.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -zxvf myball.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -jcvf myball.tar.bz2 somedirname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -jtf myball.tar.bz2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -jxvf myball.tar.bz2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>注意：<code>-f 文件名|设备名</code> 是一个整体，所以，</p><p><code>-cvf myball.tar</code> 不能写成：<code>-cfv myball.tar</code> 或 <code>-fcv myball.tar</code></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="在-bash-中提高工作效率">在 BASH 中提高工作效率<a class="hash-link" href="#在-bash-中提高工作效率" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="命令补全">命令补全<a class="hash-link" href="#命令补全" title="Direct link to heading">​</a></h3><p>通常用户在 bash 下输入命令时不必把命令输全， shell 就能判断出你所要输入的命令。</p><p>该功能的核心思想是：bash 根据用户已输入的信息来查找以这些信息开头的命令，从而试图完成当前命令的输入工作。用来执行这项功能的键是 Tab 键，按下一次 Tab 键后，bash 就试图完成整个命令的输入，如果不成功，可以再按一次 Tab 键，这时 bash 将列出所有能够与当前输入字符相匹配的命令列表。</p><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 执行 system-config-network-tui</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">system </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tab</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> -config -n</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tab</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">etwork -t</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tab</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">ui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 进入 /etc/sysconfig/network-scripts/ 目录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> /e</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tab</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sys</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tab</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> c</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tab</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ne</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tab</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> - </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tab</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 显示 $BASH 变量的值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$B</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tab</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">ASH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="命令历史">命令历史<a class="hash-link" href="#命令历史" title="Direct link to heading">​</a></h3><p>bash 可以记录一定数目的以前在 Shell 中输入的命令。</p><p>记录历史命令的文本文件由环境变量 HISTFILE 来指定，默认的记录文件是 .bash_history，这是一个隐含文件，位于用户自己的目录中。可以记录历史命令的数目由环境变量 HISTSIZE 的值指定，默认为 1000。</p><p>查看命令历史：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">history</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">history</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 查看最近 30 个历史命令</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fc –l </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 列出命令历史中第30到第50之间的命令</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>键盘快捷键：</p><p>最简单的方法是用 ↑/↓/←/→、PgUp 和 PgDn 键来查看历史命令。</p><p>如果需要的话，可以使用键盘上的编辑功能键对显示在命令行上的命令进行编辑。</p><p>感叹号的用法：</p><p>用 <code>!!</code> 执行最近执行过的命令 用 <code>!&lt;命令事件号&gt;</code> 执行已经运行过的命令 用 <code>!&lt;已经使用过的命令前面的部分&gt;</code> 执行已经运行过的以该字符串开头的最近的命令</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="命令别名">命令别名<a class="hash-link" href="#命令别名" title="Direct link to heading">​</a></h3><p>允许用户按照自己喜欢的方式对命令进行自定义。</p><p>格式：<code>alias [alias_name=&#x27;original_command&#x27;]</code></p><p>说明：</p><ul><li><code>alias_name</code> 是用户给命令取的别名。</li><li><code>original_command</code> 是原来的命令和参数。若命令中包含空格或其他的特殊字符串必须使用引号。</li><li>在定义别名时，<strong>等号两边不允许有空格</strong>。</li><li>不带任何参数的 alias 命令显示当前已定义的所有别名。</li><li>可以使用 <code>unalias alias_name</code> 命令取消某个别名的定义。</li><li>如果用户需要别名的定义在每次登录时均有效，应该将其写入用户自家目录下的 .bashrc 文件中。</li></ul><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">lh</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ls -lh&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">grep</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;grep --color=auto&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">gitcam</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;git commit -a -m&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意：</p><ul><li>若系统中有一个命令，同时又定义了一个与之同名的别名（例如，系统中有 grep 命令，且又定义了 grep 的别名），则别名将优先于系统中原有的命令的执行。</li><li>要想临时使用系统中的命令而非别名，应该在命令前添加“\”字符，例如，<code>$ \grep</code> 命令将运行系统中原来的 grep 命令而不是 grep 别名，它不在输出中显示颜色。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="信息显示命令">信息显示命令<a class="hash-link" href="#信息显示命令" title="Direct link to heading">​</a></h2><p>常用的系统信息显示命令：</p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>hostname</td><td>显示主机名称</td></tr><tr><td>uname</td><td>显示操作系统信息</td></tr><tr><td>dmesg</td><td>显示系统启动信息</td></tr><tr><td>lsmod</td><td>显示系统加载的内核模块</td></tr><tr><td>date</td><td>显示系统时间（cal 可以显示系统时间的日历）</td></tr><tr><td>env</td><td>显示系统环境变量</td></tr><tr><td>locale</td><td>显示当前语言环境（cat /etc/sysconfig/i18n）</td></tr><tr><td>cat /etc/redhat-release</td><td>显示操作系统版本（head -1 /etc/issue）</td></tr><tr><td>cat /proc/cpuinfo</td><td>显示 CPU 信息</td></tr><tr><td>lspci/lsusb</td><td>显示 PCI/USB 接口信息</td></tr><tr><td>rpm -qa</td><td>显示系统已安装的所有软件包</td></tr></tbody></table><p>常用的资源显示命令：</p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>top</td><td>显示当前系统中耗费资源最多的进程</td></tr><tr><td>free</td><td>显示当前内存的使用情况（cat /proc/meminfo）</td></tr><tr><td>du -h</td><td>显示指定的文件（目录）已使用的磁盘空间的总量</td></tr><tr><td>df -h</td><td>显示文件系统磁盘空间的使用情况</td></tr><tr><td>uptime</td><td>显示系统运行时间、用户数、负载</td></tr><tr><td>fdisk -l</td><td>查看所有分区</td></tr><tr><td>mount</td><td>查看已经挂装的分区</td></tr><tr><td>swapon -s</td><td>查看所有交换分区</td></tr><tr><td>ps -ef</td><td>查看所有进程</td></tr><tr><td>pstree</td><td>显示进程树</td></tr><tr><td>chkconfig --list</td><td>列出所有系统服务</td></tr></tbody></table><p>常用的用户相关显示命令：</p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>who/w</td><td>显示在线登录用户</td></tr><tr><td>whoami</td><td>显示用户自己的身份</td></tr><tr><td>tty</td><td>显示用户当前使用的终端</td></tr><tr><td>id</td><td>显示当前用户的 id 信息</td></tr><tr><td>groups</td><td>显示当前用户属于哪些组</td></tr><tr><td>last</td><td>查看用户登录日志</td></tr><tr><td>crontab -l</td><td>查看当前用户的计划任务</td></tr></tbody></table><p>常用的网络信息显示命令：</p><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>ifconfig</td><td>显示网络接口信息</td></tr><tr><td>route</td><td>显示系统路由表</td></tr><tr><td>iptables -nL</td><td>显示包过滤防火墙的规则设置</td></tr><tr><td>netstat</td><td>显示网络状态信息</td></tr><tr><td>cat /etc/resolv.conf</td><td>显示 DNS 配置</td></tr><tr><td>cat /etc/hosts</td><td>显示静态主机解析表</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="进一步使用-shell">进一步使用 SHELL<a class="hash-link" href="#进一步使用-shell" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="标准输入输出设备">标准输入/输出设备<a class="hash-link" href="#标准输入输出设备" title="Direct link to heading">​</a></h3><p>Linux 命令在执行时常常期望接收输入数据，命令执行后又期望将产生的数据结果输出。</p><p>Linux 的大部分命令都具有标准的输入/输出设备端口。</p><table><thead><tr><th>名称</th><th>文件描述符</th><th>含义</th><th>设备</th><th>说明</th></tr></thead><tbody><tr><td>STDIN</td><td>0</td><td>标准输入</td><td>键盘</td><td>命令在执行时所要的输入通过它来取得</td></tr><tr><td>STDOUT</td><td>1</td><td>标准输出</td><td>显示器</td><td>命令执行后的输出结果从该端口送出</td></tr><tr><td>STDERR</td><td>2</td><td>标准错误</td><td>显示器</td><td>命令执行时的错误信息通过该端口送出</td></tr></tbody></table><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 标准输入输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@soho ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 命令等待标准输入</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello </span><span class="token comment" style="color:#999988;font-style:italic"># 标准输入的屏幕回显</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello </span><span class="token comment" style="color:#999988;font-style:italic"># 标准输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">^D</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 错误输入输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@soho ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat: x: 没有那个文件或目录 </span><span class="token comment" style="color:#999988;font-style:italic"># 标准错误输出</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="重定向">重定向<a class="hash-link" href="#重定向" title="Direct link to heading">​</a></h3><p>重定向（Redirection），就是不使用系统的标准输入端口、标准输出端口或标准错误端口，而进行重新的指定，所以重定向分为输出重定向、输入重定向和错误重定向。通常情况下重定向到一个文件。</p><p>在 Shell 中，要实现重定向主要依靠重定向符实现，即 Shell 是检查命令行中有无重定向符来决定是否需要实施重定向。</p><p>重定向符：</p><table><thead><tr><th>重定向符</th><th>说明</th></tr></thead><tbody><tr><td>&lt;</td><td>输入重定向</td></tr><tr><td>&gt;</td><td>覆盖式的输出重定向</td></tr><tr><td>&gt;&gt;</td><td>追加式的输出重定向</td></tr><tr><td>2&gt;</td><td>覆盖式的错误输出重定向</td></tr><tr><td>2&gt;&gt;</td><td>追加式的错误输出重定向</td></tr><tr><td>&amp;&gt;</td><td>同时实现输出重定向和错误重定向（覆盖式）</td></tr></tbody></table><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l /tmp </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">mydir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l /etc </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain">mydir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ myprogram </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> err_file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ myprogram </span><span class="token operator" style="color:#393A34">&amp;&gt;</span><span class="token plain"> output_and_err_file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">find</span><span class="token plain">  ~  -name *.mp3 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ~/cd.play.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> “Please call me </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">68800000</span><span class="token plain">”</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">mytext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> This text forms the content of the heredocument ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">which</span><span class="token plain"> continues </span><span class="token keyword" style="color:#00009f">until</span><span class="token plain"> the end of text delimiter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="输出重定向与空设备">输出重定向与空设备<a class="hash-link" href="#输出重定向与空设备" title="Direct link to heading">​</a></h3><p>空设备（/dev/null）是个黑洞，发往它的任何内容都将不复存在，经常用于屏蔽命令的输出或错误输出，尤其用于 Shell 脚本中。 如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 屏蔽命令的输出和错误输出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ myprogram </span><span class="token operator" style="color:#393A34">&amp;&gt;</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ myprogram </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/dev/null </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 清空文件内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> /dev/null  myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> myfile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="管道应用">管道应用<a class="hash-link" href="#管道应用" title="Direct link to heading">​</a></h3><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -lR /etc </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">less</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> +15 myfile </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">head</span><span class="token plain"> -3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">man</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> col -b </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> bash.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># echo &quot;p4ssW0rd&quot; | passwd --stdin user1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^d&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /etc/passwd </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> username</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">dmesg</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> eth0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">rpm</span><span class="token plain"> –qa </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> httpd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;test email&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> mail -s </span><span class="token string" style="color:#e3116c">&quot;test&quot;</span><span class="token plain"> user@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;test print&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lpr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 统计磁盘占用情况</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 统计当前目录下磁盘占用最多的10个一级子目录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">du</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> --max-depth</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -rn </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">head</span><span class="token plain"> -11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 以降序方式显示使用磁盘空间最多的普通用户的前十名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">du</span><span class="token plain"> * -cks </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -rn </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">head</span><span class="token plain"> -11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 以排序方式查看当前目录（不包含子目录）的磁盘占据情况</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">du</span><span class="token plain"> -S </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -rn </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">head</span><span class="token plain"> -11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 统计进程</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 按内存使用从大到小排列输出进程。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> -e -o </span><span class="token string" style="color:#e3116c">&quot;%C : %p : %z : %a&quot;</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -k5 -nr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 按CPU使用从大到小排列输出进程。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> -e -o </span><span class="token string" style="color:#e3116c">&quot;%C : %p : %z : %a&quot;</span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">sort</span><span class="token plain"> -nr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="t-型管道">T 型管道<a class="hash-link" href="#t-型管道" title="Direct link to heading">​</a></h3><p>T 型管道（tee）</p><p>格式：<code>命令1 | tee 文件名 | 命令2</code></p><p>功能：将命令 1 的 STDOUT 保存在文件名中，然后管道输入给命令 2</p><p>应用场景：</p><ul><li>保存不同阶段的输出</li><li>复杂管道的故障排除</li><li>同时查看和记录输出</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="命令替换">命令替换<a class="hash-link" href="#命令替换" title="Direct link to heading">​</a></h3><p>命令替换（Command Substitution）</p><p>使用命令的输出，常用于：在文本中嵌入命令的执行结果，或命令参数是另一个命令执行的结果。</p><p>使用方法： <code>$(command)</code> 或 <!-- -->`<!-- -->command<!-- -->`</p><p><code>cmd1 $(cmd2)</code> 或 cmd1 <!-- -->`<!-- -->cmd2<!-- -->`</p><p>如：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> The present </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> is </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">date</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rpm</span><span class="token plain"> -qi </span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">rpm</span><span class="token variable" style="color:#36acaa"> -qf </span><span class="token variable punctuation" style="color:#393A34">$(</span><span class="token variable" style="color:#36acaa">which </span><span class="token variable function" style="color:#d73a49">date</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 嵌套</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="命令聚合">命令聚合<a class="hash-link" href="#命令聚合" title="Direct link to heading">​</a></h3><table><thead><tr><th>命令行形式</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td>CMD1 ; CMD2</td><td>顺序执行若干命令</td><td>pwd;date;ls</td></tr><tr><td>CMD1 &amp;&amp; CMD2</td><td>当 CMD1 运行成功时才运行 CMD2</td><td>gzip mylargefile &amp;&amp; echo “OK.”</td></tr><tr><td>CMD1 <!-- -->|<!-- -->|<!-- --> CMD2</td><td>当 CMD1 运行失败时才运行 CMD2</td><td>write osmond <!-- -->|<!-- -->|<!-- --> mail -s test osmond &lt; my.log</td></tr><tr><td>(CMDLIST)</td><td>在子 Shell 中执行命令序列</td><td>(date; who <!-- -->|<!-- --> wc -l ) &gt; <!-- -->~<!-- -->/login-users.log</td></tr><tr><td>{CMDLIST}</td><td>在当前 Shell 中执行命令序列</td><td>{ cd /home/jjh; chown jjh:bin s<!-- -->*<!-- --> ;}</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/cworld1/linux-learning/blob/main/docs/main/02-adv-char-operation.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/main/linux-intro-and-install"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Linux 介绍和安装</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/main/disk-part-and-lvm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">磁盘分区和 LVM</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#内容要点" class="table-of-contents__link toc-highlight">内容要点</a></li><li><a href="#链接文件" class="table-of-contents__link toc-highlight">链接文件</a><ul><li><a href="#ln-命令详解" class="table-of-contents__link toc-highlight">ln 命令详解</a></li><li><a href="#文件链接概念" class="table-of-contents__link toc-highlight">文件链接概念</a></li><li><a href="#硬链接和软链接的比较" class="table-of-contents__link toc-highlight">硬链接和软链接的比较</a></li><li><a href="#硬链接和软链接的不同" class="table-of-contents__link toc-highlight">硬链接和软链接的不同</a></li></ul></li><li><a href="#文本文件操作命令" class="table-of-contents__link toc-highlight">文本文件操作命令</a></li><li><a href="#管道命令详解" class="table-of-contents__link toc-highlight">管道命令详解</a><ul><li><a href="#管道命令的背景" class="table-of-contents__link toc-highlight">管道命令的背景</a></li><li><a href="#管道命令的使用" class="table-of-contents__link toc-highlight">管道命令的使用</a></li></ul></li><li><a href="#sort-命令详解" class="table-of-contents__link toc-highlight">sort 命令详解</a></li><li><a href="#find-命令详解" class="table-of-contents__link toc-highlight">find 命令详解</a><ul><li><a href="#说明" class="table-of-contents__link toc-highlight">说明</a></li><li><a href="#基础选项表达式" class="table-of-contents__link toc-highlight">基础选项表达式</a></li><li><a href="#条件匹配表达式" class="table-of-contents__link toc-highlight">条件匹配表达式</a></li><li><a href="#组合条件表达式" class="table-of-contents__link toc-highlight">组合条件表达式</a></li><li><a href="#动作表达式" class="table-of-contents__link toc-highlight">动作表达式</a></li></ul></li><li><a href="#vi-文本编辑器详解" class="table-of-contents__link toc-highlight">vi 文本编辑器详解</a><ul><li><a href="#简介" class="table-of-contents__link toc-highlight">简介</a></li><li><a href="#命令" class="table-of-contents__link toc-highlight">命令</a></li><li><a href="#3-种运行模式" class="table-of-contents__link toc-highlight">3 种运行模式</a></li><li><a href="#常见内容操作" class="table-of-contents__link toc-highlight">常见内容操作</a></li><li><a href="#常见命令" class="table-of-contents__link toc-highlight">常见命令</a></li></ul></li><li><a href="#文本文件分析命令" class="table-of-contents__link toc-highlight">文本文件分析命令</a><ul><li><a href="#wc-命令" class="table-of-contents__link toc-highlight">wc 命令</a></li><li><a href="#grep-命令" class="table-of-contents__link toc-highlight">grep 命令</a></li></ul></li><li><a href="#正则表达式" class="table-of-contents__link toc-highlight">正则表达式</a><ul><li><a href="#支持正则表达式的文本处理工具" class="table-of-contents__link toc-highlight">支持正则表达式的文本处理工具</a></li><li><a href="#正则表达式的组成" class="table-of-contents__link toc-highlight">正则表达式的组成</a></li></ul></li><li><a href="#sed-命令详解" class="table-of-contents__link toc-highlight">sed 命令详解</a><ul><li><a href="#sed-简介" class="table-of-contents__link toc-highlight">sed 简介</a></li><li><a href="#sed-的工作方式" class="table-of-contents__link toc-highlight">sed 的工作方式</a></li><li><a href="#sed-命令" class="table-of-contents__link toc-highlight">sed 命令</a></li></ul></li><li><a href="#tar-命令详解" class="table-of-contents__link toc-highlight">tar 命令详解</a></li><li><a href="#在-bash-中提高工作效率" class="table-of-contents__link toc-highlight">在 BASH 中提高工作效率</a><ul><li><a href="#命令补全" class="table-of-contents__link toc-highlight">命令补全</a></li><li><a href="#命令历史" class="table-of-contents__link toc-highlight">命令历史</a></li><li><a href="#命令别名" class="table-of-contents__link toc-highlight">命令别名</a></li></ul></li><li><a href="#信息显示命令" class="table-of-contents__link toc-highlight">信息显示命令</a></li><li><a href="#进一步使用-shell" class="table-of-contents__link toc-highlight">进一步使用 SHELL</a><ul><li><a href="#标准输入输出设备" class="table-of-contents__link toc-highlight">标准输入/输出设备</a></li><li><a href="#重定向" class="table-of-contents__link toc-highlight">重定向</a></li><li><a href="#输出重定向与空设备" class="table-of-contents__link toc-highlight">输出重定向与空设备</a></li><li><a href="#管道应用" class="table-of-contents__link toc-highlight">管道应用</a></li><li><a href="#t-型管道" class="table-of-contents__link toc-highlight">T 型管道</a></li><li><a href="#命令替换" class="table-of-contents__link toc-highlight">命令替换</a></li><li><a href="#命令聚合" class="table-of-contents__link toc-highlight">命令聚合</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs">笔记简述</a></li></ul></div><div class="col footer__col"><div class="footer__title">联系</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://t.me/cworld0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/cworld0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.cworld.top/" target="_blank" rel="noopener noreferrer" class="footer__link-item">个人博客</a></li><li class="footer__item"><a href="https://github.com/cworld1/linux-learning" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ©2023 CWorld •           <a href="https://docusaurus.io/">Docusaurus 2</a> 强力驱动 •           总访问 <span id="busuanzi_value_site_pv">???</span> 次</div><script src="https://busuanzi.icodeq.com/busuanzi.pure.mini.js"></script></div></div></footer></div>
<script src="/en/assets/js/runtime~main.72796055.js"></script>
<script src="/en/assets/js/main.022bd24e.js"></script>
</body>
</html>