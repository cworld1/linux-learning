<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ex/shell-script">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Shell 脚本 | Linux Learning</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://linux.cworld.top/en/docs/ex/shell-script"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Shell 脚本 | Linux Learning"><meta data-rh="true" name="description" content="SHELL 变量与环境"><meta data-rh="true" property="og:description" content="SHELL 变量与环境"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://linux.cworld.top/en/docs/ex/shell-script"><link data-rh="true" rel="alternate" href="https://linux.cworld.top/docs/ex/shell-script" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://linux.cworld.top/en/docs/ex/shell-script" hreflang="en"><link data-rh="true" rel="alternate" href="https://linux.cworld.top/docs/ex/shell-script" hreflang="x-default"><link rel="stylesheet" href="/en/assets/css/styles.19e3709a.css">
<link rel="preload" href="/en/assets/js/runtime~main.38ec821f.js" as="script">
<link rel="preload" href="/en/assets/js/main.014ef059.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_BBcs" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="CWorld Logo" class="themedImage_J2sv themedImage--light_cbVa"><img src="/en/img/logo.svg" alt="CWorld Logo" class="themedImage_J2sv themedImage--dark_jfGI"></div><b class="navbar__title text--truncate">CWorld Project</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/">笔记</a></div><div class="navbar__items navbar__items--right"><a href="https://cworld.top/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">博客</a><a href="https://github.com/cworld1/linux-learning" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GbyL"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_RTLM"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/ex/shell-script" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li><li><a href="/en/docs/ex/shell-script" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><div class="toggle_pcYR colorModeToggle_B47n"><button class="clean-btn toggleButton_gqls toggleButtonDisabled_LqzU" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_O59b"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_mYor"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_Lb93"><div class="navbar__search searchBarContainer_LsXR"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_b4Y7 searchBarLoadingRing_Lsyu"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_cwhP docsWrapper_amJP"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_jxU9" type="button"></button><div class="docPage_H5uh"><aside class="theme-doc-sidebar-container docSidebarContainer_APgW"><div class="sidebarViewport_h9Qd"><div class="sidebar_m_4B"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_aK5t"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/">笔记简述</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/课程说明">课程说明</a><button aria-label="Toggle the collapsible sidebar category &#x27;课程说明&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/en/docs/category/主要章节">主要章节</a><button aria-label="Toggle the collapsible sidebar category &#x27;主要章节&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/linux-intro-and-install">Linux 介绍和安装</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/adv-char-operation">字符界面操作进阶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/disk-part-and-lvm">磁盘分区和 LVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/file-sys-manage">文件系统管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/account-and-authority-manage">账户管理和权限管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/network-config-and-tools">网络配置与网络工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/process-management">进程管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/main/sys-monitor-and-log">系统监视与系统日志</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/category/附加章节">附加章节</a><button aria-label="Toggle the collapsible sidebar category &#x27;附加章节&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/ex/shell-script">Shell 脚本</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/ex/anacron-task">Anacron 任务</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_yIQ5"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_dpSd"><div class="docItemContainer_odLl"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer__9vB" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_BZAf"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/category/附加章节"><span itemprop="name">附加章节</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Shell 脚本</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_uPSR theme-doc-toc-mobile tocMobile_EIeq"><button type="button" class="clean-btn tocCollapsibleButton_bcUr">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Shell 脚本</h1><h2 class="anchor anchorWithStickyNavbar_J8e2" id="shell-变量与环境">SHELL 变量与环境<a href="#shell-变量与环境" class="hash-link" aria-label="Direct link to SHELL 变量与环境" title="Direct link to SHELL 变量与环境">​</a></h2><p>Shell 变量大致可以分为三类：</p><ul><li>内部变量：由系统提供，用户只能使用不能修改。</li><li>用户变量：由用户建立和修改，在 Shell 脚本编写中会经常用到。</li><li>环境变量：这些变量决定了用户工作的环境，它们不需要用户去定义，可以直接在 Shell 中使用，其中某些变量用户可以修改。</li></ul><h3 class="anchor anchorWithStickyNavbar_J8e2" id="用户自定义变量">用户自定义变量<a href="#用户自定义变量" class="hash-link" aria-label="Direct link to 用户自定义变量" title="Direct link to 用户自定义变量">​</a></h3><p>变量赋值（定义变量）：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">varName</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">varName</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Value </span><span class="token comment" style="color:#999988;font-style:italic"># 全局变量</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>引用变量：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$varName</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意：</p><ul><li>所有的赋值对 shell 变量都解释为字符串。</li><li>没有数据类型。</li><li>当变量的值仅仅包含数字时才允许进行数值计算。</li><li>等号赋值两边不能有空格。</li></ul><h3 class="anchor anchorWithStickyNavbar_J8e2" id="强引用与弱引用">强引用与弱引用<a href="#强引用与弱引用" class="hash-link" aria-label="Direct link to 强引用与弱引用" title="Direct link to 强引用与弱引用">​</a></h3><p>强引用：单引号对是强引用。单引号对中的字符都将作为普通字符，但不允许出现另外的单引号。
弱引用：双引号对是弱引用。双引号对中的部分字符仍保留特殊含义：</p><table><thead><tr><th>符号</th><th>符号名</th><th>特殊含义</th></tr></thead><tbody><tr><td>$</td><td>dollar 符</td><td>变量替换</td></tr><tr><td>`</td><td>反引号</td><td>命令替换</td></tr><tr><td>\ </td><td>反斜线</td><td>禁止单个字符扩展</td></tr><tr><td>!</td><td>叹号</td><td>历史命令替换</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_J8e2" id="export-命令详解">export 命令详解<a href="#export-命令详解" class="hash-link" aria-label="Direct link to export 命令详解" title="Direct link to export 命令详解">​</a></h3><p>Shell 变量的作用域</p><ul><li>局部变量的作用范围仅仅限制在其命令行所在的 Shell 或 Shell 脚本文件中；</li><li>全局变量的作用范围则包括本 Shell 进程及其所有子进程。</li></ul><p>但我们可以使用 export 命令设置作用域，将局部变量与全局变量互相转换。</p><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 显示当前Shell可见的全局变量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> -p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 定义变量值的同时声明为全局变量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">变量名1</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">值</span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">变量名2</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">值</span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 声明已经赋值的某个（些）局部变量为全局变量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">变量名</span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">变量名</span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 声明已经赋值的某个（些）全局变量为局部变量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> -n </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">变量名</span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">变量名</span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_J8e2" id="shell-变量及其作用域">Shell 变量及其作用域<a href="#shell-变量及其作用域" class="hash-link" aria-label="Direct link to Shell 变量及其作用域" title="Direct link to Shell 变量及其作用域">​</a></h3><p>打印当前进程号：echo $$
启动新的进程：bash
退出当前进程：exit
设置文件可执行权限: chmod a+x myfile
在新的进程中运行程序：./myfile 或者绝对路径
在当前 shell 运行程序:</p><ul><li><code>myfile</code></li><li><code>./myfile</code></li><li><code>文件绝对路径</code></li></ul><p>其中第一个.可以替换为 source。</p><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token plain">var1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> var2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$$</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">vi</span><span class="token plain"> myfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$$</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;var1=</span><span class="token string variable" style="color:#36acaa">$var1</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;var2=</span><span class="token string variable" style="color:#36acaa">$var2</span><span class="token string" style="color:#e3116c">&quot;</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_J8e2" id="shell-环境变量">Shell 环境变量<a href="#shell-环境变量" class="hash-link" aria-label="Direct link to Shell 环境变量" title="Direct link to Shell 环境变量">​</a></h3><p>环境变量定义 Shell 的运行环境，保证 Shell 命令的正确执行。</p><p>Shell 用环境变量来确定查找路径、注册目录、终端类型、终端名称、用户名等。</p><p>所有环境变量都是全局变量（即可以传递给 Shell 的子进程），并可以由用户重新设置。</p><p>常见的 Shell 环境变量：</p><table><thead><tr><th>变量名</th><th>含义</th></tr></thead><tbody><tr><td>HOME</td><td>用户主目录</td></tr><tr><td>LOGNAME</td><td>登录名</td></tr><tr><td>USER</td><td>用户名，与登录名相同</td></tr><tr><td>PWD</td><td>当前目录/工作目录名</td></tr><tr><td>MAIL</td><td>用户的邮箱路径名</td></tr><tr><td>HOSTNAME</td><td>计算机的主机名</td></tr><tr><td>INPUTRC</td><td>默认的键盘映像</td></tr><tr><td>SHELL</td><td>用户所使用的 shell 的路径名</td></tr><tr><td>LANG</td><td>默认语言</td></tr><tr><td>HISTSIZE</td><td>history 所能记住的命令的最多个数</td></tr><tr><td>PATH</td><td>shell 查找用户输入命令的路径 (目录列表)</td></tr><tr><td>PS1、PS2</td><td>shell 一级、二级命令提示符</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_J8e2" id="shell-变量的查询显示和取消">Shell 变量的查询、显示和取消<a href="#shell-变量的查询显示和取消" class="hash-link" aria-label="Direct link to Shell 变量的查询、显示和取消" title="Direct link to Shell 变量的查询、显示和取消">​</a></h3><p>显示当前已经定义的所有变量：</p><ul><li>所有环境变量：<code>env</code></li><li>所有变量和函数（包括环境变量）：<code>set</code></li></ul><p>显示某（些）个变量的值：<code>echo $NAME1 [$NAME2 ……]</code></p><p>取消变量的声明或赋值：<code>unset &lt;NAME&gt;</code></p><h3 class="anchor anchorWithStickyNavbar_J8e2" id="用户工作环境">用户工作环境<a href="#用户工作环境" class="hash-link" aria-label="Direct link to 用户工作环境" title="Direct link to 用户工作环境">​</a></h3><p>用户登录系统时，Shell 为用户自动定义唯一的工作环境并对该环境进行维护直至用户注销。该环境将定义如身份、工作场所和正在运行的进程等特性。这些特性由指定的环境变量值定义。</p><p>用户工作环境有登录环境和非登录环境之分：</p><ul><li>登录环境是指用户登录系统时的工作环境，此时的 Shell 对登录用户而言是主 Shell。</li><li>非登录环境是指用户再调用子 Shell 时所使用的用户环境。</li></ul><h4 class="anchor anchorWithStickyNavbar_J8e2" id="设置用户工作环境">设置用户工作环境<a href="#设置用户工作环境" class="hash-link" aria-label="Direct link to 设置用户工作环境" title="Direct link to 设置用户工作环境">​</a></h4><p>对所有用户进行设置：</p><ul><li>/etc/profile</li><li>/etc/bashrc</li></ul><p>只对当前用户进行设置：</p><ul><li>~/.bash_profile</li><li>~/.bashrc</li></ul><blockquote><p>一般来说，个人 bash 环境设置都定义在 ~/.bashrc 文件里</p></blockquote><h3 class="anchor anchorWithStickyNavbar_J8e2" id="登录-shell-和非登录-shell-的启动过程">登录 shell 和非登录 shell 的启动过程<a href="#登录-shell-和非登录-shell-的启动过程" class="hash-link" aria-label="Direct link to 登录 shell 和非登录 shell 的启动过程" title="Direct link to 登录 shell 和非登录 shell 的启动过程">​</a></h3><p>Login shell：</p><kbd>/etc/profile</kbd> → <kbd>/etc/profile.d/\*.sh</kbd>↓<kbd>`$HOME/.bash_profile`</kbd>↓<kbd>$HOME/.bashrc</kbd> → <kbd>/etc/bashrc</kbd><p>Non-Login shell：</p><kbd>$HOME/.bashrc</kbd> → <kbd>/etc/bashrc</kbd><h3 class="anchor anchorWithStickyNavbar_J8e2" id="引用">引用<a href="#引用" class="hash-link" aria-label="Direct link to 引用" title="Direct link to 引用">​</a></h3><p>在 bash 中，有些字符具有特殊含义，如果需要忽略这些字符的特殊含义，就必须使用引用技术。</p><p>引用可以通过下面三种方式实现：</p><ul><li>使用转义字符：\</li><li>使用单引号：‘ ’</li><li>使用双引号：“ ”</li></ul><p>转义字符的引用方法就是直接在字符前加反斜杠。如：<code>、$</code>，<code>\&#x27;</code>，<code>\“</code>，<code>\\</code>，<code>\,</code>，<code>\!</code></p><h2 class="anchor anchorWithStickyNavbar_J8e2" id="shell-基础运算">SHELL 基础运算<a href="#shell-基础运算" class="hash-link" aria-label="Direct link to SHELL 基础运算" title="Direct link to SHELL 基础运算">​</a></h2><p>shell 脚本：一堆命令集合，这些命令完成一件特定的事情。</p><p>Shell 脚本的一般后缀是 .sh。</p><h3 class="anchor anchorWithStickyNavbar_J8e2" id="shell-解释器">Shell 解释器<a href="#shell-解释器" class="hash-link" aria-label="Direct link to Shell 解释器" title="Direct link to Shell 解释器">​</a></h3><p>在写 Shell 脚本时，往往第一行要注明用什么解释器来解释这个脚本。</p><p>如 <code>#!/bin/bash</code> 即用 /bin/bash 这个解释器来解释接下来的语句。同理还有 <code>#!/bin/csh</code> 等。</p><blockquote><p>以下列出相对流行的 shell，但不是全部：</p><ol><li><p>sh（全称 Bourne Shell），是 UNIX 最初使用的 shell，而且在每种 UNIX 上都可以使用。</p><p>Bourne Shell 在 shell 编程方便相当优秀，但在处理与用户的交互方便作得不如其他几种 shell。</p></li><li><p>bash（全称 Bourne Again Shell），LinuxOS 默认的，它是 Bourne Shell 的扩展。</p><p>与 Bourne Shell 完全兼容，并且在 Bourne Shell 的基础上增加了很多特性。可以提供命令补全，命令编辑和命令历史等功能。它还包含了很多 C Shell 和 Korn Shell 中的优点，有灵活和强大的编辑接口，同时又很友好的用户界面。</p></li><li><p>csh（全称 C Shell），是一种比 Bourne Shell 更适合的变种 Shell，它的语法与 C 语言很相似。</p></li><li><p>Tcsh 是 Linux 提供的 C Shell 的一个扩展版本。</p><p>Tcsh 包括命令行编辑，可编程单词补全，拼写校正，历史命令替换，作业控制和类似 C 语言的语法，他不仅和 Bash Shell 提示符兼容，而且还提供比 Bash Shell 更多的提示符参数。</p></li><li><p>ksh（全称 Korn Shell），集合了 C Shell 和 Bourne Shell 的优点并且和 Bourne Shell 完全兼容。</p></li><li><p>pdksh，是 Linux 系统提供的 ksh 的扩展。</p><p>pdksh 支持人物控制，可以在命令行上挂起，后台执行，唤醒或终止程序。</p></li></ol></blockquote><h3 class="anchor anchorWithStickyNavbar_J8e2" id="shell-的简单编写">Shell 的简单编写<a href="#shell-的简单编写" class="hash-link" aria-label="Direct link to Shell 的简单编写" title="Direct link to Shell 的简单编写">​</a></h3><ol><li><p>创建变量：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">varName</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">varName</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Value </span><span class="token comment" style="color:#999988;font-style:italic"># 全局变量</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>变量赋值：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">var1</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$var2</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>变量输入：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 注意内容会因为包含空格断开，类似c语言</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">read</span><span class="token plain"> var1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">read</span><span class="token plain"> var1 var2</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>变量输出：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;var1 = </span><span class="token string variable" style="color:#36acaa">$var1</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 使用 `` 写入公式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">head</span><span class="token variable" style="color:#36acaa"> -1 /etc/passwd </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">cut</span><span class="token variable" style="color:#36acaa"> -d </span><span class="token variable string" style="color:#e3116c">&quot;:&quot;</span><span class="token variable" style="color:#36acaa"> -f </span><span class="token variable number" style="color:#36acaa">1,3</span><span class="token variable" style="color:#36acaa">,4</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 不想换行时使用 -n</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&quot;Input your name: &quot;</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_J8e2" id="数值运算">数值运算<a href="#数值运算" class="hash-link" aria-label="Direct link to 数值运算" title="Direct link to 数值运算">​</a></h3><p>在 shell 里只能计算整数，小数会向下取整。</p><p>可供运算的运算符：</p><ul><li><code>+</code>：加法</li><li><code>-</code>：减法</li><li><code>\*</code>：乘法（注意转义的斜杠需要保留）</li><li><code>/</code>：除法（取整数）</li><li><code>%</code>：取模（取余数）</li></ul><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">a</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">b</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 法1：用 expr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">c</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">expr</span><span class="token variable" style="color:#36acaa"> $a </span><span class="token variable punctuation" style="color:#393A34">\</span><span class="token variable" style="color:#36acaa">* $b</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">expr</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable number" style="color:#36acaa">0</span><span class="token variable" style="color:#36acaa"> / </span><span class="token variable number" style="color:#36acaa">1</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 法2：用 $(())</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">d</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$((</span><span class="token variable" style="color:#36acaa">a </span><span class="token variable operator" style="color:#393A34">+</span><span class="token variable" style="color:#36acaa"> b</span><span class="token variable" style="color:#36acaa">))</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 注意括号里边的表达式没有$</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_J8e2" id="控制语句">控制语句<a href="#控制语句" class="hash-link" aria-label="Direct link to 控制语句" title="Direct link to 控制语句">​</a></h2><h3 class="anchor anchorWithStickyNavbar_J8e2" id="条件语句的判断比较">条件语句的判断比较<a href="#条件语句的判断比较" class="hash-link" aria-label="Direct link to 条件语句的判断比较" title="Direct link to 条件语句的判断比较">​</a></h3><ol><li><p>字符串类型：</p><ul><li><p><code>==</code>：等于</p></li><li><p><code>!=</code>：不等于</p></li><li><p><code>-z</code>：判断长度为零</p></li><li><p><code>-n</code>：判断长度不为零</p><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -z “</span><span class="token variable" style="color:#36acaa">$string</span><span class="token plain">” </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> “</span><span class="token variable" style="color:#36acaa">$A</span><span class="token plain">” </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> “abcdef” </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>数值类型：</p><ul><li><p><code>-eq</code>：等于</p></li><li><p><code>-ne</code>：不等于</p></li><li><p><code>-gt</code>：大于</p></li><li><p><code>-lt</code>：小于</p></li><li><p><code>-ge</code>：大于或等于</p></li><li><p><code>-le</code>：小于或等于</p></li></ul><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$data</span><span class="token plain"> -ge </span><span class="token number" style="color:#36acaa">256</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>文件类型（文件属性）：</p><ul><li><code>-d</code>：是否存在此路径</li><li><code>-f</code>：是否为普通文件</li><li><code>-r</code>、<code>-w</code>、<code>-x</code>：当前的执行用户是否拥有对应文件的读、写、执行权限</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_J8e2" id="判别语句-if">判别语句 if<a href="#判别语句-if" class="hash-link" aria-label="Direct link to 判别语句 if" title="Direct link to 判别语句 if">​</a></h3><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> 判断的对象 </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> 判断的对象 </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中对于多个条件判断：</p><ul><li><p><code>-a</code>：表示且（并）</p></li><li><p><code>-o</code>：表示或</p></li></ul><p>有时在复杂条件时可以使用 <code>[[ ]]</code> 条件判断结构，而不是 <code>[ ]</code>，能够防止脚本中的一些逻辑错误。</p><p>比如使用 &amp;&amp;、||、&gt; 操作符能够正常存在于 <code>[[ ]]</code> 条件判断结构中，但是如果出现在 <code>[ ]</code> 结构中的话，会报错。</p><p>比如，可以直接使用 <code>if [[ $a != 1 &amp;&amp; $a != 2 ]]</code>。如果不使用双括号, 则为 <code>if [ $a -ne 1 -a $a -ne 2 ]</code>，或者 <code>if [ $a != 1 -a $a != 2 ]</code>。</p><p>一般来说：</p><ul><li>字符串比较使用 <code>[[ ]]</code></li><li>数值比较使用 <code>[ ]</code></li><li>数值运算使用 <code>(( ))</code></li></ul><p>事实上，只要括号中的运算符、表达式符合 C 语言运算规则，都可用在$((exp))中，甚至是三目运算符。</p><blockquote><p>例如：输入一个成绩，用 if-lese 语句判断成绩的等级：</p><ul><li>[80-100]<!-- -->：A</li><li>[60-80)：B</li><li>[0-60)：C</li></ul><p>如果成绩非法不是<!-- -->[0-100]<!-- -->，则提示用户输入的成绩是非法的成绩</p><p>答案：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&quot;Input a score : &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">read</span><span class="token plain"> score</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$score</span><span class="token plain"> -lt </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> -o </span><span class="token variable" style="color:#36acaa">$score</span><span class="token plain"> -gt </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Invalid score: </span><span class="token string variable" style="color:#36acaa">$score</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> -n </span><span class="token string" style="color:#e3116c">&quot;Your score is: &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$score</span><span class="token plain"> -ge </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> -a </span><span class="token variable" style="color:#36acaa">$score</span><span class="token plain"> -le </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;A&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$score</span><span class="token plain"> -ge </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> -a </span><span class="token variable" style="color:#36acaa">$score</span><span class="token plain"> -lt </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;B&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;C&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><h3 class="anchor anchorWithStickyNavbar_J8e2" id="条件语句-case">条件语句 case<a href="#条件语句-case" class="hash-link" aria-label="Direct link to 条件语句 case" title="Direct link to 条件语句 case">​</a></h3><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">变量</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   匹配项1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   匹配项2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   *</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">esac</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$number</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">6</span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">7</span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin class-name">echo</span><span class="token plain"> “6,7,8”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token number" style="color:#36acaa">4</span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">5</span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin class-name">echo</span><span class="token plain"> “4,5,6”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   *</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">esac</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_J8e2" id="循环语句-while">循环语句 while<a href="#循环语句-while" class="hash-link" aria-label="Direct link to 循环语句 while" title="Direct link to 循环语句 while">​</a></h3><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> 表达式 </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意只有在表达式为真的时候，才执行命令；如果为假，循环结束。</p><h3 class="anchor anchorWithStickyNavbar_J8e2" id="循环语句-for">循环语句 for<a href="#循环语句-for" class="hash-link" aria-label="Direct link to 循环语句 for" title="Direct link to 循环语句 for">​</a></h3><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> 变量 </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> 单词表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>循环的次数由单词表中单词的个数来决定，变量每次从单词表取一个单词，然后执行循环体，直到将所有的单词全部取完。如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">i</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">weekdays</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Mon Tue Wed Thu Fri Sat Sun&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">day</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$weekdays</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Weekday </span><span class="token string variable" style="color:#36acaa">$((</span><span class="token string variable" style="color:#36acaa">i</span><span class="token string variable operator" style="color:#393A34">++</span><span class="token string variable" style="color:#36acaa">))</span><span class="token string" style="color:#e3116c"> : </span><span class="token string variable" style="color:#36acaa">$day</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果 <code>in 单词表</code> 省略，此时变量从位置参数中取单词：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> 变量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">num</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The </span><span class="token string variable" style="color:#36acaa">${num}</span><span class="token string" style="color:#e3116c">th argument is: </span><span class="token string variable" style="color:#36acaa">$i</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token variable punctuation" style="color:#393A34">((</span><span class="token variable" style="color:#36acaa">num</span><span class="token variable operator" style="color:#393A34">++</span><span class="token variable punctuation" style="color:#393A34">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_J8e2" id="函数">函数<a href="#函数" class="hash-link" aria-label="Direct link to 函数" title="Direct link to 函数">​</a></h2><p>为了避免大型脚本变得复杂、晦涩，我们将大型脚本代码分割成小块，将这些被命名的代码块称为函数。</p><p>一个函数就是一个子程序，用于完成特定的任务，如：添加一个用户、判断用户是否为管理员等。</p><p>函数定义之后可以被使用它的主程序调用，调用函数的方法与执行Shell命令无异。我们可以：</p><ul><li>可以在 Shell 脚本中调用（函数需先定义而后调用）</li><li>在命令行上直接调用（定义函数的文件需先加载）</li></ul><h3 class="anchor anchorWithStickyNavbar_J8e2" id="合理使用-shell-函数的优点">合理使用 Shell 函数的优点<a href="#合理使用-shell-函数的优点" class="hash-link" aria-label="Direct link to 合理使用 Shell 函数的优点" title="Direct link to 合理使用 Shell 函数的优点">​</a></h3><ol><li><strong>简化程序代码，实现代码重用。</strong>如：<code>is_root_user()</code> 函数可以由不同的shell脚本重复使用。</li><li><strong>实现结构化编程。</strong>使脚本内容更加简洁，增强程序的易读性</li><li><strong>提高执行效率。</strong>将常用的功能定义为多个函数并将其保存在一个文件中（类似其他语言的“模块”文件），在 ~/bashrc 或命令行上使用 source 命令调用这个文件，此文件中定义的多个函数一次性地调入内存，从而加快运行速度。</li></ol><h3 class="anchor anchorWithStickyNavbar_J8e2" id="函数的定义">函数的定义<a href="#函数的定义" class="hash-link" aria-label="Direct link to 函数的定义" title="Direct link to 函数的定义">​</a></h3><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> 函数名</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 或者写作：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">函数名</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_J8e2" id="函数的存储和查询">函数的存储和查询<a href="#函数的存储和查询" class="hash-link" aria-label="Direct link to 函数的存储和查询" title="Direct link to 函数的存储和查询">​</a></h3><p>函数的存储：</p><ul><li><p>函数和被调用程序在同一个文件中：函数的定义必须出现在调用之前</p></li><li><p>函数和被调用程序在不同的文件中：保存函数的文件必须先使用 source 命令执行之后，才能调用其中的函数</p></li></ul><p>函数的显示：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 显示当前 Shell 可见的所有函数名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -F</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 显示当前 Shell 可见的所有（指定）的函数定义：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">declare</span><span class="token plain"> -f </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">functionName</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 指定函数名</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_J8e2" id="函数的调用和载入">函数的调用和载入<a href="#函数的调用和载入" class="hash-link" aria-label="Direct link to 函数的调用和载入" title="Direct link to 函数的调用和载入">​</a></h3><p>调用方法一：只需输入函数名即可调用函数。但注意函数必须在调用之前定义。</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token plain">函数名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 对于有参数的函数：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">函数名 参数1 参数2</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>通过 $?（上一个函数或者命令返回的结果），获得函数的返回值。函数本身要在屏幕上输出结果。</p><p>适合返回的是一个整数，并且只能够返回 0-255 之间的整数。</p></li><li><p>在函数内部通过位置变量 <code>$1</code>, <code>$2</code>, <code>$3</code>... 来获得传递的参数。</p></li></ul><p>调用方法二：将函数的标准输出返回给一个变量（使用反向单引号），函数本身不再在屏幕上输出结果。相当于是把函数的输出赋值给一个变量，而并没有使用函数本身的返回值。</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">value</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">函数名 参数1 参数2 </span><span class="token variable punctuation" style="color:#393A34">..</span><span class="token variable" style="color:#36acaa">.</span><span class="token variable" style="color:#36acaa">`</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>无论函数定义中有没有返回值，这种调用方式函数返回值始终是0。</p><p>适合函数输出/返回的是一个字符串。</p><blockquote><p>注意：在 shell 中变量的作用域默认是整个文件的，即使是在函数内部定义的函数，其它函数也可以使用。如果需要变量只在函数内部有效，需要用 local 修饰变量。</p></blockquote><p>函数的载入：使用 <code>source</code> 命令。如：show 函数写在了 function.sh 里面了，我们可以用 source 命令 <code>source function.sh</code> 载入到程序中。</p><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### User define Function (UDF) ###</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">sql_bak</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Running mysqldump tool...&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">sync_bak</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Running rsync tool...&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">git_bak</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Running gistore tool...&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">tar_bak</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Running tar tool...&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### Main script starts here ###</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable environment constant" style="color:#36acaa">PS3</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Please choose a backup tools : &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">ss</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> mysqldump </span><span class="token function" style="color:#d73a49">rsync</span><span class="token plain"> gistore </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> quit</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$REPLY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> sql_bak  </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> sync_bak </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> git_bak  </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tar_bak  </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin class-name">exit</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">esac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>PS3 环境变量定义 Shell 脚本中使用 select 时的提示符，如果不选择默认为 <code>(#?)</code></li><li>do 和 done 之间的是循环体</li><li>select 语句会从后面的单词表中自动构建一个带数字的菜单</li><li>每次循环，用户任何的输入值会自动保存（覆盖）在 REPLY 变量中</li><li>select 之后的那个变量没有实际作用，可以使用任何字符占位</li></ul><h3 class="anchor anchorWithStickyNavbar_J8e2" id="函数参数与变量">函数参数与变量<a href="#函数参数与变量" class="hash-link" aria-label="Direct link to 函数参数与变量" title="Direct link to 函数参数与变量">​</a></h3><p>参数（Arguments）：</p><ul><li>调用函数时，使用位置参数的形式为函数传递参数</li><li>函数内的 <code>$1-${n}</code>、<code>$*</code> 和 <code>$@</code> 表示其接收的参数</li><li>在主程序和函数中，<code>$0</code> 始终代表脚本名</li></ul><p>参考：<a href="http://c.biancheng.net/view/806.html" target="_blank" rel="noopener noreferrer">Shell特殊变量：Shell \$#、\$*、\$@、\$?、\$\$ (biancheng.net)</a></p><table><thead><tr><th>变量</th><th>含义</th></tr></thead><tbody><tr><td>$0</td><td>当前脚本的文件名。</td></tr><tr><td>$n（n≥1）</td><td>传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是 <code>$1</code>，第二个参数是 <code>$2</code>。</td></tr><tr><td>$#</td><td>传递给脚本或函数的参数个数。</td></tr><tr><td>$*</td><td>传递给脚本或函数的所有参数。</td></tr><tr><td>$@</td><td>传递给脚本或函数的所有参数。当被双引号 <code>&quot; &quot;</code> 包裹时，<code>$@</code> 与 <code>$*</code> 稍有不同</td></tr><tr><td>$?</td><td>上个命令的退出状态，或函数的返回值</td></tr><tr><td>$$</td><td>当前 Shell 进程 ID。对于 Shell 脚本，就是这些脚本所在的进程 ID。</td></tr></tbody></table><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 得到两个数相加的和</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-name function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">return</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">expr</span><span class="token variable" style="color:#36acaa"> $1 + $2</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#调用函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$?</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#获取函数返回值</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>变量（Variables）：</p><ul><li>函数内使用 local 声明的变量是局部（Local）变量。局部变量的作用域是当前函数以及其调用的所有函数。</li><li>函数内未使用 local 声明的变量是普通变量，作用域是整个文件，即主程序和函数中的同名变量是一个变量（地址一致）</li></ul><p>如：</p><div class="language-bash codeBlockContainer_azwa theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_kMmd"><pre tabindex="0" class="prism-code language-bash codeBlock_eq8c thin-scrollbar"><code class="codeBlockLines_M058"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># User define Function (UDF)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">usage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;List the MAX of the positive integers in command line. &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Usage: </span><span class="token string variable" style="color:#36acaa">`</span><span class="token string variable function" style="color:#d73a49">basename</span><span class="token string variable" style="color:#36acaa"> $0</span><span class="token string variable" style="color:#36acaa">`</span><span class="token string" style="color:#e3116c"> &lt;num1&gt; &lt;num2&gt; [ &lt;num3&gt; ... ]&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># basename 命令用于打印显示去掉路径之后的文件名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -z </span><span class="token variable" style="color:#36acaa">$1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> -z </span><span class="token variable" style="color:#36acaa">$2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">largest</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain">  </span><span class="token variable punctuation" style="color:#393A34">((</span><span class="token variable" style="color:#36acaa">i</span><span class="token variable operator" style="color:#393A34">&gt;</span><span class="token variable" style="color:#36acaa">largest</span><span class="token variable punctuation" style="color:#393A34">))</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">largest</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### Main script starts here ###</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$@</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The largest of the numbers is </span><span class="token string variable" style="color:#36acaa">$largest</span><span class="token string" style="color:#e3116c">.&quot;</span><br></span></code></pre><div class="buttonGroup_VjRJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_nkyW" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_nr7X"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_P_G1"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>调用：<code>./function_max.sh 10 58 111 32768 66</code></p><p>由于 largest 变量在函数 max 内没有使用 local 声明，所以它是全局的。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/cworld1/linux-learning/blob/main/docs/ex/01-shell-script.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OYEL" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_e0Br"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/category/附加章节"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">附加章节</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/ex/anacron-task"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Anacron 任务</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Clu8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#shell-变量与环境" class="table-of-contents__link toc-highlight">SHELL 变量与环境</a><ul><li><a href="#用户自定义变量" class="table-of-contents__link toc-highlight">用户自定义变量</a></li><li><a href="#强引用与弱引用" class="table-of-contents__link toc-highlight">强引用与弱引用</a></li><li><a href="#export-命令详解" class="table-of-contents__link toc-highlight">export 命令详解</a></li><li><a href="#shell-变量及其作用域" class="table-of-contents__link toc-highlight">Shell 变量及其作用域</a></li><li><a href="#shell-环境变量" class="table-of-contents__link toc-highlight">Shell 环境变量</a></li><li><a href="#shell-变量的查询显示和取消" class="table-of-contents__link toc-highlight">Shell 变量的查询、显示和取消</a></li><li><a href="#用户工作环境" class="table-of-contents__link toc-highlight">用户工作环境</a></li><li><a href="#登录-shell-和非登录-shell-的启动过程" class="table-of-contents__link toc-highlight">登录 shell 和非登录 shell 的启动过程</a></li><li><a href="#引用" class="table-of-contents__link toc-highlight">引用</a></li></ul></li><li><a href="#shell-基础运算" class="table-of-contents__link toc-highlight">SHELL 基础运算</a><ul><li><a href="#shell-解释器" class="table-of-contents__link toc-highlight">Shell 解释器</a></li><li><a href="#shell-的简单编写" class="table-of-contents__link toc-highlight">Shell 的简单编写</a></li><li><a href="#数值运算" class="table-of-contents__link toc-highlight">数值运算</a></li></ul></li><li><a href="#控制语句" class="table-of-contents__link toc-highlight">控制语句</a><ul><li><a href="#条件语句的判断比较" class="table-of-contents__link toc-highlight">条件语句的判断比较</a></li><li><a href="#判别语句-if" class="table-of-contents__link toc-highlight">判别语句 if</a></li><li><a href="#条件语句-case" class="table-of-contents__link toc-highlight">条件语句 case</a></li><li><a href="#循环语句-while" class="table-of-contents__link toc-highlight">循环语句 while</a></li><li><a href="#循环语句-for" class="table-of-contents__link toc-highlight">循环语句 for</a></li></ul></li><li><a href="#函数" class="table-of-contents__link toc-highlight">函数</a><ul><li><a href="#合理使用-shell-函数的优点" class="table-of-contents__link toc-highlight">合理使用 Shell 函数的优点</a></li><li><a href="#函数的定义" class="table-of-contents__link toc-highlight">函数的定义</a></li><li><a href="#函数的存储和查询" class="table-of-contents__link toc-highlight">函数的存储和查询</a></li><li><a href="#函数的调用和载入" class="table-of-contents__link toc-highlight">函数的调用和载入</a></li><li><a href="#函数参数与变量" class="table-of-contents__link toc-highlight">函数参数与变量</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">笔记</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs">笔记简述</a></li></ul></div><div class="col footer__col"><div class="footer__title">联系</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://t.me/cworld0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GbyL"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/cworld0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GbyL"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://cworld.top/" target="_blank" rel="noopener noreferrer" class="footer__link-item">个人博客</a></li><li class="footer__item"><a href="https://github.com/cworld1/linux-learning" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GbyL"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ©2024 CWorld •           <a href="https://docusaurus.io/">Docusaurus 2</a> 强力驱动 •           总访问 <span id="busuanzi_value_site_pv">???</span> 次</div><script src="https://busuanzi.icodeq.com/busuanzi.pure.mini.js"></script></div></div></footer></div>
<script src="/en/assets/js/runtime~main.38ec821f.js"></script>
<script src="/en/assets/js/main.014ef059.js"></script>
</body>
</html>